-- Base64 decoder (biar bisa di executor seperti Delta tanpa HttpService)
local b='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'

local function base64Decode(data)
    data = string.gsub(data, '[^'..b..'=]', '')
    return (data:gsub('.', function(x)
        if (x == '=') then return '' end
        local r,f='',(b:find(x)-1)
        for i=6,1,-1 do r=r..(f%2^i - f%2^(i-1) > 0 and '1' or '0') end
        return r
    end):gsub('%d%d%d?%d?%d?%d?%d?%d?', function(x)
        if (#x ~= 8) then return '' end
        local c=0
        for i=1,8 do c=c + (x:sub(i,i)=='1' and 2^(8-i) or 0) end
        return string.char(c)
    end))
end

-- hasil Base64 dari script kamu
local code = [[LS0gLy8gTG9hZCBSYXlmaWVsZApsb2NhbCBSYXlmaWVsZCA9IGxvYWRzdHJpbmcoZ2FtZTpIdHRwR2V0KCJodHRwczovL3Npcml1cy5tZW51L3JheWZpZWxkIikpKCkKCi0tIC8vIEJ1YXQgV2luZG93IHV0YW1hCmxvY2FsIFdpbmRvdyA9IFJheWZpZWxkOkNyZWF0ZVdpbmRvdyh7CiAgIE5hbWUgPSAiVklQOiBNVCBBa2hpcmF0IiwKICAgTG9hZGluZ1RpdGxlID0gIlNlZGFuZyBMb2FkaW5nIiwKICAgTG9hZGluZ1N1YnRpdGxlID0gIkJ5IEFjb25nIEdhY29yIiwKfSkKCi0tIC8vIEFtYmlsIEhXSUQKbG9jYWwgaHdpZCA9IGdhbWU6R2V0U2VydmljZSgiUmJ4QW5hbHl0aWNzU2VydmljZSIpOkdldENsaWVudElkKCkKCi0tIC8vIExvYWQgZGF0YWJhc2UgZGFyaSBHaXRIdWIKbG9jYWwgc3VjY2VzcywgQWxsb3dlZEhXSURzID0gcGNhbGwoZnVuY3Rpb24oKQogICAgcmV0dXJuIGxvYWRzdHJpbmcoZ2FtZTpIdHRwR2V0KCJodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vbm9tYW1vbngvZ3VudW5nL3JlZnMvaGVhZHMvbWFpbi9od2lkLmx1YSIpKSgpCmVuZCkKCmlmIG5vdCBzdWNjZXNzIG9yIHR5cGUoQWxsb3dlZEhXSURzKSB+PSAidGFibGUiIHRoZW4KICAgIEFsbG93ZWRIV0lEcyA9IHt9CmVuZAoKLS0gLy8gQ2VrIEhXSUQKbG9jYWwgaXNWSVAgPSBBbGxvd2VkSFdJRHNbaHdpZF0gPT0gdHJ1ZQoKLS0gLy8gVGFiIEhXSUQgU0VMQUxVIEFEQQpsb2NhbCBIV0lEVGFiID0gV2luZG93OkNyZWF0ZVRhYigiSFdJRCIsIDQ0ODMzNjI0NTgpCgppZiBpc1ZJUCB0aGVuCiAgICBIV0lEVGFiOkNyZWF0ZVBhcmFncmFwaCh7CiAgICAgICAgVGl0bGUgPSAi4pyFIEhXSUQgVGVyZGFmdGFyIiwKICAgICAgICBDb250ZW50ID0gIkhXSUQga2FtdSBzdWRhaCB0ZXJkYWZ0YXIuXG5cbiIgLi4gaHdpZAogICAgfSkKCiAgICBIV0lEVGFiOkNyZWF0ZUJ1dHRvbih7CiAgICAgICAgTmFtZSA9ICJSZXNldCBIV0lEIiwKICAgICAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICAgICAgc2V0Y2xpcGJvYXJkKGh3aWQpCiAgICAgICAgICAgIFJheWZpZWxkOk5vdGlmeSh7CiAgICAgICAgICAgICAgICBUaXRsZSA9ICJSZXNldCBIV0lEIiwKICAgICAgICAgICAgICAgIENvbnRlbnQgPSAiSFdJRCBrYW11IHN1ZGFoIGRpc2FsaW4uXG5IdWJ1bmdpIG93bmVyIHVudHVrIHJlc2V0IGRpIGRhdGFiYXNlLiIsCiAgICAgICAgICAgICAgICBEdXJhdGlvbiA9IDYKICAgICAgICAgICAgfSkKICAgICAgICBlbmQsCiAgICB9KQoKLS0gPT09PT09PT09PT09PT09PT09PT09PT09Ci0tIFRhYiBUZWxlcG9ydAotLSA9PT09PT09PT09PT09PT09PT09PT09PT0KbG9jYWwgVGVsZVRhYiA9IFdpbmRvdzpDcmVhdGVUYWIoIlRlbGVwb3J0IiwgNDQ4MzM2MjQ1OCkKCi0tIFZhcmlhYmVsIGRlbGF5IGRlZmF1bHQgKGtodXN1cyBhdXRvIHRlbGVwb3J0KQpsb2NhbCBBdXRvVGVsZXBvcnREZWxheSA9IDIKCi0tID09PT09PT09PT09PT09PT09PT09PT09PQotLSBLb29yZGluYXQgVGVsZXBvcnQKLS0gPT09PT09PT09PT09PT09PT09PT09PT09CmxvY2FsIHRlbGVwb3J0UG9pbnRzID0gewogICAgQ1AxICA9IENGcmFtZS5uZXcoLTEzNSwgNDIyLCAtMjA5KSwKICAgIENQMiAgPSBDRnJhbWUubmV3KC0xMiwgOTUwLCAtMTA0OSksCiAgICBDUDMgID0gQ0ZyYW1lLm5ldygxMTcsIDEyMDIsIC0xMzYyKSwKICAgIENQNCAgPSBDRnJhbWUubmV3KDEwOCwgMTQ2NiwgLTE4MDQpLAogICAgQ1A1ICA9IENGcmFtZS5uZXcoMjkyLCAxODY0LCAtMjMyNCksCiAgICBDUDYgID0gQ0ZyYW1lLm5ldyg1NTcsIDIwODYsIC0yNTUxKSwKICAgIENQNyAgPSBDRnJhbWUubmV3KDc0NywgMjE4NiwgLTI1MDYpLAogICAgQ1A4ICA9IENGcmFtZS5uZXcoNzk0LCAyMzMwLCAtMjYzMyksCiAgICBDUDkgID0gQ0ZyYW1lLm5ldyg5NjYsIDI1MTgsIC0yNjIyKSwKICAgIENQMTAgPSBDRnJhbWUubmV3KDE2MTksIDMwNTgsIC0yNzYwKSwKICAgIENQMTEgPSBDRnJhbWUubmV3KDI4MDEsIDQ0MjQsIC00Nzk5KSwKICAgIENQMTIgPSBDRnJhbWUubmV3KDM0NzEsIDQ4NTgsIC00MTg2KSwKICAgIENQMTMgPSBDRnJhbWUubmV3KDM0ODIsIDUxMDYsIC00Mjg2KSwKICAgIENQMTQgPSBDRnJhbWUubmV3KDM5ODEsIDU2NjYsIC0zOTc3KSwKICAgIENQMTUgPSBDRnJhbWUubmV3KDQ0OTIsIDU4OTgsIC0zNzkyKSwKICAgIENQMTYgPSBDRnJhbWUubmV3KDUwNjUsIDYzNzAsIC0yOTgzKSwKICAgIENQMTcgPSBDRnJhbWUubmV3KDU1MzIsIDY1OTAsIC0yNDg0KSwKICAgIENQMTggPSBDRnJhbWUubmV3KDU1NDgsIDY4NzQsIC0xMDQxKSwKICAgIENQMTkgPSBDRnJhbWUubmV3KDQzMzAsIDc2NDAsIDEyNiksCiAgICBDUDIwID0gQ0ZyYW1lLm5ldygzNDYyLCA3NzEwLCA5NDIpLAogICAgUHVuY2FrID0gQ0ZyYW1lLm5ldygzMDUzLCA3ODc4LCAxMDM4KSwgCn0KCi0tID09PT09PT09PT09PT09PT09PT09PT09PQotLSBNYW51YWwgVGVsZXBvcnQgVEFOUEEgZGVsYXkKLS0gPT09PT09PT09PT09PT09PT09PT09PT09ClRlbGVUYWI6Q3JlYXRlU2VjdGlvbigiVGVsZXBvcnQgTWFudWFsIikKCmZvciBpID0gMSwgMjEgZG8KICAgIFRlbGVUYWI6Q3JlYXRlQnV0dG9uKHsKICAgICAgICBOYW1lID0gIvCfk40gVGVsZXBvcnQgQ1AgIiAuLiBpLAogICAgICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gdGVsZXBvcnRQb2ludHNbIkNQIi4uaV0KICAgICAgICBlbmQKICAgIH0pCmVuZAoKVGVsZVRhYjpDcmVhdGVCdXR0b24oewogICAgTmFtZSA9ICLim7DvuI8gVGVsZXBvcnQgUHVuY2FrIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgPSB0ZWxlcG9ydFBvaW50cy5QdW5jYWsKICAgIGVuZAp9KQoKLS0gPT09PT09PT09PT09PT09PT09PT09PT09Ci0tIEF1dG8gVGVsZXBvcnQKLS0gPT09PT09PT09PT09PT09PT09PT09PT09CmxvY2FsIGlzQXV0b1RlbGVwb3J0aW5nID0gZmFsc2UKbG9jYWwgYXV0b1RlbGVwb3J0VGFzayA9IG5pbAoKbG9jYWwgYXV0b1RlbGVwb3J0UG9pbnRzID0gewogICAgdGVsZXBvcnRQb2ludHMuQ1AxLCB0ZWxlcG9ydFBvaW50cy5DUDIsIHRlbGVwb3J0UG9pbnRzLkNQMywKICAgIHRlbGVwb3J0UG9pbnRzLkNQNCwgdGVsZXBvcnRQb2ludHMuQ1A1LCB0ZWxlcG9ydFBvaW50cy5DUDYsCiAgICB0ZWxlcG9ydFBvaW50cy5DUDcsIHRlbGVwb3J0UG9pbnRzLkNQOCwgdGVsZXBvcnRQb2ludHMuQ1A5LAogICAgdGVsZXBvcnRQb2ludHMuQ1AxMCwgdGVsZXBvcnRQb2ludHMuQ1AxMSwgdGVsZXBvcnRQb2ludHMuQ1AxMiwKICAgIHRlbGVwb3J0UG9pbnRzLkNQMTMsIHRlbGVwb3J0UG9pbnRzLkNQMTQsIHRlbGVwb3J0UG9pbnRzLkNQMTUsCiAgICB0ZWxlcG9ydFBvaW50cy5DUDE2LCB0ZWxlcG9ydFBvaW50cy5DUDE3LCB0ZWxlcG9ydFBvaW50cy5DUDE4LAogICAgdGVsZXBvcnRQb2ludHMuQ1AxOSwgdGVsZXBvcnRQb2ludHMuQ1AyMCx0ZWxlcG9ydFBvaW50cy5QdW5jYWsKfQoKbG9jYWwgZnVuY3Rpb24gcmVzcGF3bkNoYXJhY3RlcigpCiAgICBsb2NhbCBwbGF5ZXIgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIKICAgIGlmIHBsYXllci5DaGFyYWN0ZXIgdGhlbgogICAgICAgIHBsYXllci5DaGFyYWN0ZXI6QnJlYWtKb2ludHMoKQogICAgZW5kCiAgICByZXBlYXQgdGFzay53YWl0KCkgdW50aWwgcGxheWVyLkNoYXJhY3RlciBhbmQgcGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCBwbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkLkhlYWx0aCA+IDAKZW5kCgpsb2NhbCBmdW5jdGlvbiBpc0F0U3Bhd24ocG9zLCB0aHJlc2hvbGQpCiAgICBsb2NhbCBzcGF3blBvcyA9IHRlbGVwb3J0UG9pbnRzLlNwYXduLlBvc2l0aW9uCiAgICByZXR1cm4gKHBvcyAtIHNwYXduUG9zKS5NYWduaXR1ZGUgPD0gdGhyZXNob2xkCmVuZAoKVGVsZVRhYjpDcmVhdGVTZWN0aW9uKCJUZWxlcG9ydCBPdG9tYXRpcyIpClRlbGVUYWI6Q3JlYXRlVG9nZ2xlKHsKICAgIE5hbWUgPSAi4pqhIEF1dG8gVGVsZXBvcnQgKSIsCiAgICBDdXJyZW50VmFsdWUgPSBmYWxzZSwKICAgIEZsYWcgPSAiQXV0b1RQIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oVmFsdWUpCiAgICAgICAgaXNBdXRvVGVsZXBvcnRpbmcgPSBWYWx1ZQogICAgICAgIGlmIFZhbHVlIHRoZW4KICAgICAgICAgICAgYXV0b1RlbGVwb3J0VGFzayA9IHRhc2suc3Bhd24oZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgbG9jYWwgcGxheWVyID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyCiAgICAgICAgICAgICAgICB3aGlsZSBpc0F1dG9UZWxlcG9ydGluZyBkbwogICAgICAgICAgICAgICAgICAgIC0tIFRlbGVwb3J0IGRhcmkgQ1AxIHNhbXBhaSBQdW5jYWsKICAgICAgICAgICAgICAgICAgICBmb3IgaSwgY2YgaW4gaXBhaXJzKGF1dG9UZWxlcG9ydFBvaW50cykgZG8KICAgICAgICAgICAgICAgICAgICAgICAgaWYgbm90IGlzQXV0b1RlbGVwb3J0aW5nIHRoZW4gYnJlYWsgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIGNoYXIgPSBwbGF5ZXIuQ2hhcmFjdGVyCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGNoYXIgYW5kIGNoYXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gY2YKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJheWZpZWxkOk5vdGlmeSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVGl0bGUgPSAiQXV0byBUZWxlcG9ydCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ29udGVudCA9ICJUZWxlcG9ydCBrZSBDUCAiIC4uIGksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRHVyYXRpb24gPSAyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdChBdXRvVGVsZXBvcnREZWxheSkgLS0gZGVsYXkgc2VzdWFpIHNsaWRlcgogICAgICAgICAgICAgICAgICAgIGVuZAoKICAgICAgICAgICAgICAgICAgICBpZiBub3QgaXNBdXRvVGVsZXBvcnRpbmcgdGhlbiBicmVhayBlbmQKICAgICAgICAgICAgICAgICAgICBSYXlmaWVsZDpOb3RpZnkoewogICAgICAgICAgICAgICAgICAgICAgICBUaXRsZSA9ICJSZXNwYXduIiwKICAgICAgICAgICAgICAgICAgICAgICAgQ29udGVudCA9ICJSZXNwYXduIGthcmFrdGVyLi4uIiwKICAgICAgICAgICAgICAgICAgICAgICAgRHVyYXRpb24gPSAyLAogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgcmVzcGF3bkNoYXJhY3RlcigpCgogICAgICAgICAgICAgICAgICAgIC0tIFR1bmdndSBzYW1wYWkga2FyYWt0ZXIgYmVuYXItYmVuYXIgZGkgc3Bhd24KICAgICAgICAgICAgICAgICAgICBsb2NhbCBtYXhXYWl0VGltZSwgd2FpdGVkID0gNiwgMAogICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoMC41KQogICAgICAgICAgICAgICAgICAgICAgICB3YWl0ZWQgKz0gMC41CiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIGNoYXIgPSBwbGF5ZXIuQ2hhcmFjdGVyCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGNoYXIgYW5kIGNoYXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBpc0F0U3Bhd24oY2hhci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uLCAxMCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgdW50aWwgd2FpdGVkID49IG1heFdhaXRUaW1lCgogICAgICAgICAgICAgICAgICAgIFJheWZpZWxkOk5vdGlmeSh7CiAgICAgICAgICAgICAgICAgICAgICAgIFRpdGxlID0gIkxvb3AgVWxhbmciLAogICAgICAgICAgICAgICAgICAgICAgICBDb250ZW50ID0gIk11bGFpIGxhZ2kgZGFyaSBDUDEuLi4iLAogICAgICAgICAgICAgICAgICAgICAgICBEdXJhdGlvbiA9IDIsCiAgICAgICAgICAgICAgICAgICAgfSkKCiAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KDEuNSkKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpCiAgICAgICAgZWxzZQogICAgICAgICAgICBpZiBhdXRvVGVsZXBvcnRUYXNrIHRoZW4KICAgICAgICAgICAgICAgIHRhc2suY2FuY2VsKGF1dG9UZWxlcG9ydFRhc2spCiAgICAgICAgICAgICAgICBhdXRvVGVsZXBvcnRUYXNrID0gbmlsCiAgICAgICAgICAgIGVuZAogICAgICAgICAgICBSYXlmaWVsZDpOb3RpZnkoewogICAgICAgICAgICAgICAgVGl0bGUgPSAiQXV0byBUZWxlcG9ydCIsCiAgICAgICAgICAgICAgICBDb250ZW50ID0gIkF1dG8gdGVsZXBvcnQgZGloZW50aWthbiEiLAogICAgICAgICAgICAgICAgRHVyYXRpb24gPSAzLAogICAgICAgICAgICB9KQogICAgICAgIGVuZAogICAgZW5kLAp9KQpUZWxlVGFiOkNyZWF0ZVNlY3Rpb24oIkF0dXIgRGVsYXkgQXV0byBUZWxlcG9ydCIpCi0tIFNsaWRlciB1bnR1ayBhdHVyIGRlbGF5IGF1dG8gdGVsZXBvcnQKVGVsZVRhYjpDcmVhdGVTbGlkZXIoewogICAgTmFtZSA9ICLij7MgRGVsYXkgQXV0byBUZWxlcG9ydCAoZGV0aWspIiwKICAgIFJhbmdlID0gezAsIDEwfSwKICAgIEluY3JlbWVudCA9IDAuNSwKICAgIFN1ZmZpeCA9ICJzIiwKICAgIEN1cnJlbnRWYWx1ZSA9IEF1dG9UZWxlcG9ydERlbGF5LAogICAgRmxhZyA9ICJBVERlbGF5IiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oVmFsdWUpCiAgICAgICAgQXV0b1RlbGVwb3J0RGVsYXkgPSBWYWx1ZQogICAgZW5kLAp9KQoKCi0tIERldGVjdGlvbiBUYWIKLS0gPT09PT09PT09PT09PT09PT09PT09PT09CmxvY2FsIFBsYXllcnMgPSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKQpsb2NhbCBEZXRlY3Rpb25UYWIgPSBXaW5kb3c6Q3JlYXRlVGFiKCJEZXRlY3Rpb24iLCA0NDgzMzYyNDU4KQpEZXRlY3Rpb25UYWI6Q3JlYXRlU2VjdGlvbigiRGV0ZWtzaSIpCi0tID09PT09PT09PT09PT09PT09PT09PT09PQotLSBIZWxwZXIgRnVuY3Rpb25zCi0tID09PT09PT09PT09PT09PT09PT09PT09PQpsb2NhbCBmdW5jdGlvbiBHZXRQbGF5ZXJTdW1taXQocGxheWVyKQogICAgbG9jYWwgc3VtbWl0TnVtYmVyID0gbmlsCiAgICBsb2NhbCBjaGFyYWN0ZXIgPSBwbGF5ZXIuQ2hhcmFjdGVyCiAgICBpZiBjaGFyYWN0ZXIgdGhlbgogICAgICAgIGxvY2FsIGhlYWQgPSBjaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkhlYWQiKQogICAgICAgIGlmIGhlYWQgdGhlbgogICAgICAgICAgICBmb3IgXywgZ3VpIGluIGlwYWlycyhoZWFkOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICBpZiBndWk6SXNBKCJCaWxsYm9hcmRHdWkiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgZm9yIF8sIGxhYmVsIGluIGlwYWlycyhndWk6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgaWYgbGFiZWw6SXNBKCJUZXh0TGFiZWwiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBzdW1taXRUZXh0ID0gc3RyaW5nLm1hdGNoKGxhYmVsLlRleHQsICJbU3NddW1taXRbXiVkXSooWyVkLCUuXSspIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHN1bW1pdFRleHQgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1bW1pdFRleHQgPSBzdW1taXRUZXh0OmdzdWIoIlssJS5dIiwgIiIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VtbWl0TnVtYmVyID0gdG9udW1iZXIoc3VtbWl0VGV4dCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAogICAgaWYgbm90IHN1bW1pdE51bWJlciB0aGVuCiAgICAgICAgbG9jYWwgc3RhdHMgPSBwbGF5ZXI6RmluZEZpcnN0Q2hpbGQoImxlYWRlcnN0YXRzIikKICAgICAgICBpZiBzdGF0cyB0aGVuCiAgICAgICAgICAgIGxvY2FsIHN1bW1pdFN0YXQgPSBzdGF0czpGaW5kRmlyc3RDaGlsZCgiU3VtbWl0Iikgb3Igc3RhdHM6RmluZEZpcnN0Q2hpbGQoIlN1bW1pdHMiKQogICAgICAgICAgICBpZiBzdW1taXRTdGF0IGFuZCB0b251bWJlcihzdW1taXRTdGF0LlZhbHVlKSB0aGVuCiAgICAgICAgICAgICAgICBzdW1taXROdW1iZXIgPSB0b251bWJlcihzdW1taXRTdGF0LlZhbHVlKQogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAogICAgcmV0dXJuIHN1bW1pdE51bWJlciBvciAwCmVuZAoKbG9jYWwgZnVuY3Rpb24gRGV0ZWN0QWRtaW5zKCkKICAgIGxvY2FsIGFkbWlucyA9IHt9CiAgICBmb3IgXywgcGxheWVyIGluIGlwYWlycyhQbGF5ZXJzOkdldFBsYXllcnMoKSkgZG8KICAgICAgICBsb2NhbCBjaGFyYWN0ZXIgPSBwbGF5ZXIuQ2hhcmFjdGVyCiAgICAgICAgaWYgY2hhcmFjdGVyIHRoZW4KICAgICAgICAgICAgbG9jYWwgaGVhZCA9IGNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSGVhZCIpCiAgICAgICAgICAgIGlmIGhlYWQgdGhlbgogICAgICAgICAgICAgICAgZm9yIF8sIGd1aSBpbiBpcGFpcnMoaGVhZDpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgIGlmIGd1aTpJc0EoIkJpbGxib2FyZEd1aSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIF8sIGxhYmVsIGluIGlwYWlycyhndWk6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGxhYmVsOklzQSgiVGV4dExhYmVsIikgYW5kIHN0cmluZy5maW5kKHN0cmluZy51cHBlcihsYWJlbC5UZXh0KSwgIkFETUlOIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlLmluc2VydChhZG1pbnMsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTmFtZSA9IHBsYXllci5OYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTdW1taXQgPSBHZXRQbGF5ZXJTdW1taXQocGxheWVyKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAogICAgcmV0dXJuIGFkbWlucwplbmQKCmxvY2FsIGZ1bmN0aW9uIERldGVjdFRvcFN1bW1pdHMobGltaXQpCiAgICBsb2NhbCByZXN1bHRzID0ge30KICAgIGZvciBfLCBwbGF5ZXIgaW4gaXBhaXJzKFBsYXllcnM6R2V0UGxheWVycygpKSBkbwogICAgICAgIGxvY2FsIHN1bW1pdE51bWJlciA9IEdldFBsYXllclN1bW1pdChwbGF5ZXIpCiAgICAgICAgaWYgc3VtbWl0TnVtYmVyIHRoZW4KICAgICAgICAgICAgdGFibGUuaW5zZXJ0KHJlc3VsdHMsIHtOYW1lID0gcGxheWVyLk5hbWUsIFN1bW1pdCA9IHN1bW1pdE51bWJlcn0pCiAgICAgICAgZW5kCiAgICBlbmQKICAgIHRhYmxlLnNvcnQocmVzdWx0cywgZnVuY3Rpb24oYSwgYikgcmV0dXJuIGEuU3VtbWl0ID4gYi5TdW1taXQgZW5kKQogICAgbG9jYWwgdG9wTiA9IHt9CiAgICBmb3IgaSA9IDEsIG1hdGgubWluKGxpbWl0LCAjcmVzdWx0cykgZG8KICAgICAgICB0YWJsZS5pbnNlcnQodG9wTiwgcmVzdWx0c1tpXSkKICAgIGVuZAogICAgcmV0dXJuIHRvcE4KZW5kCgotLSA9PT09PT09PT09PT09PT09PT09PT09PT0KLS0gQWRtaW4gRGV0ZWN0aW9uCi0tID09PT09PT09PT09PT09PT09PT09PT09PQpsb2NhbCBBZG1pbkxvb3AKbG9jYWwgQWRtaW5MYWJlbAoKRGV0ZWN0aW9uVGFiOkNyZWF0ZVRvZ2dsZSh7CiAgICBOYW1lID0gIvCflI0gQ2hlY2sgQWRtaW5zIiwKICAgIEN1cnJlbnRWYWx1ZSA9IGZhbHNlLAogICAgRmxhZyA9ICJDaGVja0FkbWluc1RvZ2dsZSIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKFZhbHVlKQogICAgICAgIGlmIFZhbHVlIHRoZW4KICAgICAgICAgICAgQWRtaW5Mb29wID0gdGFzay5zcGF3bihmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBsb2NhbCBsYXN0QWRtaW5zID0gIiIKICAgICAgICAgICAgICAgIHdoaWxlIHRydWUgZG8KICAgICAgICAgICAgICAgICAgICBsb2NhbCBhZG1pbnMgPSBEZXRlY3RBZG1pbnMoKQogICAgICAgICAgICAgICAgICAgIGlmICNhZG1pbnMgPiAwIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgbGFiZWxUZXh0ID0gIkFkbWluIFRlcmRldGVrc2kgKCIuLiNhZG1pbnMuLiIpOiIKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgbm90aWZ5VGV4dCA9IGxhYmVsVGV4dAogICAgICAgICAgICAgICAgICAgICAgICBmb3IgXywgZGF0YSBpbiBpcGFpcnMoYWRtaW5zKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWxUZXh0ID0gbGFiZWxUZXh0IC4uICJcbi0gIiAuLiBkYXRhLk5hbWUgLi4gIiAoU3VtbWl0OiAiIC4uIGRhdGEuU3VtbWl0IC4uICIpIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgbm90aWZ5VGV4dCA9IG5vdGlmeVRleHQgLi4gIlxuLSAiIC4uIGRhdGEuTmFtZSAuLiAiIChTdW1taXQ6ICIgLi4gZGF0YS5TdW1taXQgLi4gIikiCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBpZiBBZG1pbkxhYmVsIHRoZW4gQWRtaW5MYWJlbDpTZXQobGFiZWxUZXh0KSBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgaWYgbm90aWZ5VGV4dCB+PSBsYXN0QWRtaW5zIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJheWZpZWxkOk5vdGlmeSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVGl0bGUgPSAiQWRtaW4gVGVyZGV0ZWtzaSEiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENvbnRlbnQgPSBub3RpZnlUZXh0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIER1cmF0aW9uID0gNywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXN0QWRtaW5zID0gbm90aWZ5VGV4dAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIEFkbWluTGFiZWwgdGhlbiBBZG1pbkxhYmVsOlNldCgiQWRtaW4gVGVyZGV0ZWtzaTogLSIpIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBsYXN0QWRtaW5zID0gIiIKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoNSkKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpCiAgICAgICAgZWxzZQogICAgICAgICAgICBpZiBBZG1pbkxvb3AgdGhlbgogICAgICAgICAgICAgICAgdGFzay5jYW5jZWwoQWRtaW5Mb29wKQogICAgICAgICAgICAgICAgQWRtaW5Mb29wID0gbmlsCiAgICAgICAgICAgICAgICBpZiBBZG1pbkxhYmVsIHRoZW4gQWRtaW5MYWJlbDpTZXQoIkFkbWluIFRlcmRldGVrc2k6IC0iKSBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQsCn0pCgotLSA9PT09PT09PT09PT09PT09PT09PT09PT0KLS0gU3VtbWl0IERldGVjdGlvbgotLSA9PT09PT09PT09PT09PT09PT09PT09PT0KbG9jYWwgU3VtbWl0TG9vcApsb2NhbCBTdW1taXRMYWJlbAoKRGV0ZWN0aW9uVGFiOkNyZWF0ZVRvZ2dsZSh7CiAgICBOYW1lID0gIvCflI0gQ2hlY2sgUHJvIiwKICAgIEN1cnJlbnRWYWx1ZSA9IGZhbHNlLAogICAgRmxhZyA9ICJDaGVja1N1bW1pdFRvZ2dsZSIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKFZhbHVlKQogICAgICAgIGlmIFZhbHVlIHRoZW4KICAgICAgICAgICAgU3VtbWl0TG9vcCA9IHRhc2suc3Bhd24oZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgbG9jYWwgbGFzdFRvcCA9ICIiCiAgICAgICAgICAgICAgICB3aGlsZSB0cnVlIGRvCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdG9wMyA9IERldGVjdFRvcFN1bW1pdHMoMykKICAgICAgICAgICAgICAgICAgICBpZiAjdG9wMyA+IDAgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBsYWJlbFRleHQgPSAiVG9wIFB1bmNhazoiCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIG5vdGlmeVRleHQgPSAiIgogICAgICAgICAgICAgICAgICAgICAgICBmb3IgaSwgZGF0YSBpbiBpcGFpcnModG9wMykgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsVGV4dCA9IGxhYmVsVGV4dCAuLiAiXG4iIC4uIGkgLi4gIikgIiAuLiBkYXRhLk5hbWUgLi4gIiAoIiAuLiBkYXRhLlN1bW1pdCAuLiAiKSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdGlmeVRleHQgPSBub3RpZnlUZXh0IC4uICJcbiIgLi4gaSAuLiAiKSAiIC4uIGRhdGEuTmFtZSAuLiAiICgiIC4uIGRhdGEuU3VtbWl0IC4uICIpIgogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgaWYgU3VtbWl0TGFiZWwgdGhlbiBTdW1taXRMYWJlbDpTZXQobGFiZWxUZXh0KSBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgaWYgbm90aWZ5VGV4dCB+PSBsYXN0VG9wIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJheWZpZWxkOk5vdGlmeSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVGl0bGUgPSAiUHVuY2FrIFRvcCAzISIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ29udGVudCA9IG5vdGlmeVRleHQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRHVyYXRpb24gPSA3LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RUb3AgPSBub3RpZnlUZXh0CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgaWYgU3VtbWl0TGFiZWwgdGhlbiBTdW1taXRMYWJlbDpTZXQoIlRvcCBQdW5jYWs6IC0iKSBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgbGFzdFRvcCA9ICIiCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KDUpCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKQogICAgICAgIGVsc2UKICAgICAgICAgICAgaWYgU3VtbWl0TG9vcCB0aGVuCiAgICAgICAgICAgICAgICB0YXNrLmNhbmNlbChTdW1taXRMb29wKQogICAgICAgICAgICAgICAgU3VtbWl0TG9vcCA9IG5pbAogICAgICAgICAgICAgICAgaWYgU3VtbWl0TGFiZWwgdGhlbiBTdW1taXRMYWJlbDpTZXQoIlRvcCBQdW5jYWs6IC0iKSBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQsCn0pCgotLSA9PT09PT09PT09PT09PT09PT09PT09PT0KLS0gTGFiZWwgZGkgcGFsaW5nIGJhd2FoCi0tID09PT09PT09PT09PT09PT09PT09PT09PQpBZG1pbkxhYmVsID0gRGV0ZWN0aW9uVGFiOkNyZWF0ZUxhYmVsKCJBZG1pbiBUZXJkZXRla3NpOiAtIikKU3VtbWl0TGFiZWwgPSBEZXRlY3Rpb25UYWI6Q3JlYXRlTGFiZWwoIlRvcCBQdW5jYWs6IC0iKQoKRGV0ZWN0aW9uVGFiOkNyZWF0ZVNlY3Rpb24oIkZpdHVyIExhaW5ueWEiKQoKLS0gPT09PT09PT09PT09PT09PT09PT09PT09Ci0tIEF1dG8gTGVhdmUgSmlrYSBBZG1pbgotLSA9PT09PT09PT09PT09PT09PT09PT09PT0KbG9jYWwgQXV0b0xlYXZlTG9vcAoKRGV0ZWN0aW9uVGFiOkNyZWF0ZVRvZ2dsZSh7CiAgICBOYW1lID0gIvCfmqogQXV0byBMZWF2ZSBKaWthIEFkbWluIiwKICAgIEN1cnJlbnRWYWx1ZSA9IGZhbHNlLAogICAgRmxhZyA9ICJBdXRvTGVhdmVBZG1pblRvZ2dsZSIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKFZhbHVlKQogICAgICAgIGlmIFZhbHVlIHRoZW4KICAgICAgICAgICAgQXV0b0xlYXZlTG9vcCA9IHRhc2suc3Bhd24oZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgd2hpbGUgdHJ1ZSBkbwogICAgICAgICAgICAgICAgICAgIGxvY2FsIGFkbWlucyA9IERldGVjdEFkbWlucygpCiAgICAgICAgICAgICAgICAgICAgaWYgI2FkbWlucyA+IDAgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAtLSBOb3RpZiBkdWx1IGJpYXIgamVsYXMKICAgICAgICAgICAgICAgICAgICAgICAgUmF5ZmllbGQ6Tm90aWZ5KHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRpdGxlID0gIktlbHVhciBTZXJ2ZXIhIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIENvbnRlbnQgPSAiQWRtaW4gdGVyZGV0ZWtzaSwga2VsdWFyIG90b21hdGlzLi4uIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIER1cmF0aW9uID0gNSwKICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KDEpCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllcjpLaWNrKCJBZG1pbiB0ZXJkZXRla3NpIGRpIHNlcnZlci4gS2FtdSBvdG9tYXRpcyBrZWx1YXIuIikKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoNSkKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpCiAgICAgICAgZWxzZQogICAgICAgICAgICBpZiBBdXRvTGVhdmVMb29wIHRoZW4KICAgICAgICAgICAgICAgIHRhc2suY2FuY2VsKEF1dG9MZWF2ZUxvb3ApCiAgICAgICAgICAgICAgICBBdXRvTGVhdmVMb29wID0gbmlsCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kLAp9KQpsb2NhbCBBdXRvTm90aWZ5TG9vcAoKRGV0ZWN0aW9uVGFiOkNyZWF0ZVRvZ2dsZSh7CiAgICBOYW1lID0gIvCfk6QgTm90aWYgQWRtaW4gTWFzdWsiLAogICAgQ3VycmVudFZhbHVlID0gZmFsc2UsCiAgICBGbGFnID0gIk5vdGlmeUFkbWluSm9pblRvZ2dsZSIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKFZhbHVlKQogICAgICAgIGlmIFZhbHVlIHRoZW4KICAgICAgICAgICAgLS0gUGFzYW5nIGxpc3RlbmVyIFBsYXllckFkZGVkCiAgICAgICAgICAgIEF1dG9Ob3RpZnlMb29wID0gUGxheWVycy5QbGF5ZXJBZGRlZDpDb25uZWN0KGZ1bmN0aW9uKHBsYXllcikKICAgICAgICAgICAgICAgIHBsYXllci5DaGFyYWN0ZXJBZGRlZDpDb25uZWN0KGZ1bmN0aW9uKGNoYXIpCiAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KDIpCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgaGVhZCA9IGNoYXI6RmluZEZpcnN0Q2hpbGQoIkhlYWQiKQogICAgICAgICAgICAgICAgICAgIGlmIGhlYWQgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBmb3IgXywgZ3VpIGluIGlwYWlycyhoZWFkOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBndWk6SXNBKCJCaWxsYm9hcmRHdWkiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIF8sIGxhYmVsIGluIGlwYWlycyhndWk6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbGFiZWw6SXNBKCJUZXh0TGFiZWwiKSBhbmQgc3RyaW5nLmZpbmQoc3RyaW5nLnVwcGVyKGxhYmVsLlRleHQpLCAiQURNSU4iKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSYXlmaWVsZDpOb3RpZnkoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRpdGxlID0gIuKaoO+4jyBBZG1pbiBNYXN1ayEiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENvbnRlbnQgPSBwbGF5ZXIuTmFtZSAuLiAiIGFkYWxhaCBBZG1pbiEiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIER1cmF0aW9uID0gOCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kKQogICAgICAgICAgICBlbmQpCiAgICAgICAgZWxzZQogICAgICAgICAgICBpZiBBdXRvTm90aWZ5TG9vcCB0aGVuCiAgICAgICAgICAgICAgICBBdXRvTm90aWZ5TG9vcDpEaXNjb25uZWN0KCkKICAgICAgICAgICAgICAgIEF1dG9Ob3RpZnlMb29wID0gbmlsCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kLAp9KQoKCi0tID09PT09PT09PT09PT09PT09PT09PT09PQotLSBUYWIgUGVuZ2F0dXJhbgotLSA9PT09PT09PT09PT09PT09PT09PT09PT0KbG9jYWwgU2V0dGluZ3NUYWIgPSBXaW5kb3c6Q3JlYXRlVGFiKCJTZXR0aW5ncyIsIDYwMzQ1MDk5OTMpCgoKU2V0dGluZ3NUYWI6Q3JlYXRlU2VjdGlvbigiRml0dXIgVGFtYmFoYW4iKQotLSA9PT09PT09PT09PT09PT09PT09PT09PT0KLS0gV2FsbGhhY2sgTmFtYSArIEphcmFrIChBdXRvIFVwZGF0ZSkKLS0gPT09PT09PT09PT09PT09PT09PT09PT09CmxvY2FsIFBsYXllcnMgPSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKQpsb2NhbCBMb2NhbFBsYXllciA9IFBsYXllcnMuTG9jYWxQbGF5ZXIKbG9jYWwgUnVuU2VydmljZSA9IGdhbWU6R2V0U2VydmljZSgiUnVuU2VydmljZSIpCgpsb2NhbCBFU1BFbmFibGVkID0gZmFsc2UKbG9jYWwgRVNQT2JqZWN0cyA9IHt9Cgpsb2NhbCBmdW5jdGlvbiBDcmVhdGVOYW1lRVNQKHBsYXllcikKICAgIGlmIEVTUE9iamVjdHNbcGxheWVyXSB0aGVuIHJldHVybiBlbmQKCiAgICBsb2NhbCBiaWxsYm9hcmQgPSBJbnN0YW5jZS5uZXcoIkJpbGxib2FyZEd1aSIpCiAgICBiaWxsYm9hcmQuTmFtZSA9ICJOYW1lRVNQIgogICAgYmlsbGJvYXJkLlNpemUgPSBVRGltMi5uZXcoMCwgMTUwLCAwLCAyNSkKICAgIGJpbGxib2FyZC5BbHdheXNPblRvcCA9IHRydWUKICAgIGJpbGxib2FyZC5TdHVkc09mZnNldCA9IFZlY3RvcjMubmV3KDAsIDMsIDApCgogICAgbG9jYWwgbGFiZWwgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIpCiAgICBsYWJlbC5TaXplID0gVURpbTIubmV3KDEsIDAsIDEsIDApCiAgICBsYWJlbC5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQogICAgbGFiZWwuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDAsIDI1NSwgMCkKICAgIGxhYmVsLlRleHRTdHJva2VUcmFuc3BhcmVuY3kgPSAwLjIKICAgIGxhYmVsLkZvbnQgPSBFbnVtLkZvbnQuU291cmNlU2Fuc0JvbGQKICAgIGxhYmVsLlRleHRTaXplID0gMTQKICAgIGxhYmVsLlRleHQgPSBwbGF5ZXIuRGlzcGxheU5hbWUKICAgIGxhYmVsLlBhcmVudCA9IGJpbGxib2FyZAoKICAgIEVTUE9iamVjdHNbcGxheWVyXSA9IHtiaWxsYm9hcmQgPSBiaWxsYm9hcmQsIGxhYmVsID0gbGFiZWx9CmVuZAoKbG9jYWwgZnVuY3Rpb24gUmVtb3ZlRVNQKHBsYXllcikKICAgIGlmIEVTUE9iamVjdHNbcGxheWVyXSB0aGVuCiAgICAgICAgaWYgRVNQT2JqZWN0c1twbGF5ZXJdLmJpbGxib2FyZCB0aGVuCiAgICAgICAgICAgIEVTUE9iamVjdHNbcGxheWVyXS5iaWxsYm9hcmQ6RGVzdHJveSgpCiAgICAgICAgZW5kCiAgICAgICAgRVNQT2JqZWN0c1twbGF5ZXJdID0gbmlsCiAgICBlbmQKZW5kCgpsb2NhbCBmdW5jdGlvbiBBdHRhY2hCaWxsYm9hcmQocGxheWVyLCBjaGFyKQogICAgbG9jYWwgb2JqID0gRVNQT2JqZWN0c1twbGF5ZXJdCiAgICBpZiBvYmogYW5kIGNoYXIgYW5kIGNoYXI6RmluZEZpcnN0Q2hpbGQoIkhlYWQiKSB0aGVuCiAgICAgICAgb2JqLmJpbGxib2FyZC5BZG9ybmVlID0gY2hhci5IZWFkCiAgICAgICAgb2JqLmJpbGxib2FyZC5QYXJlbnQgPSBjaGFyLkhlYWQKICAgIGVuZAplbmQKCi0tIExvb3AgdXRhbWEgdXBkYXRlIGphcmFrICYgcGFzYW5nIEVTUApSdW5TZXJ2aWNlLlJlbmRlclN0ZXBwZWQ6Q29ubmVjdChmdW5jdGlvbigpCiAgICBpZiBub3QgRVNQRW5hYmxlZCB0aGVuIHJldHVybiBlbmQKICAgIGxvY2FsIGxvY2FsQ2hhciA9IExvY2FsUGxheWVyLkNoYXJhY3RlcgogICAgbG9jYWwgbG9jYWxIUlAgPSBsb2NhbENoYXIgYW5kIGxvY2FsQ2hhcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpCgogICAgZm9yIF8sIHBsciBpbiBpcGFpcnMoUGxheWVyczpHZXRQbGF5ZXJzKCkpIGRvCiAgICAgICAgaWYgcGxyIH49IExvY2FsUGxheWVyIHRoZW4KICAgICAgICAgICAgLS0gcGFzdGlrYW4gc2VsYWx1IGFkYSBFU1AKICAgICAgICAgICAgaWYgbm90IEVTUE9iamVjdHNbcGxyXSB0aGVuCiAgICAgICAgICAgICAgICBDcmVhdGVOYW1lRVNQKHBscikKICAgICAgICAgICAgZW5kCgogICAgICAgICAgICBsb2NhbCBvYmogPSBFU1BPYmplY3RzW3Bscl0KICAgICAgICAgICAgbG9jYWwgY2hhciA9IHBsci5DaGFyYWN0ZXIKICAgICAgICAgICAgaWYgY2hhciBhbmQgY2hhcjpGaW5kRmlyc3RDaGlsZCgiSGVhZCIpIHRoZW4KICAgICAgICAgICAgICAgIC0tIHJlLWF0dGFjaCBrYWxhdSBwZXJsdQogICAgICAgICAgICAgICAgaWYgb2JqLmJpbGxib2FyZC5QYXJlbnQgfj0gY2hhci5IZWFkIHRoZW4KICAgICAgICAgICAgICAgICAgICBBdHRhY2hCaWxsYm9hcmQocGxyLCBjaGFyKQogICAgICAgICAgICAgICAgZW5kCgogICAgICAgICAgICAgICAgLS0gdXBkYXRlIGphcmFrIHJlYWx0aW1lCiAgICAgICAgICAgICAgICBsb2NhbCBocnAgPSBjaGFyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikKICAgICAgICAgICAgICAgIGlmIGxvY2FsSFJQIGFuZCBocnAgdGhlbgogICAgICAgICAgICAgICAgICAgIGxvY2FsIGRpc3QgPSAoaHJwLlBvc2l0aW9uIC0gbG9jYWxIUlAuUG9zaXRpb24pLk1hZ25pdHVkZQogICAgICAgICAgICAgICAgICAgIG9iai5sYWJlbC5UZXh0ID0gcGxyLkRpc3BsYXlOYW1lIC4uICIgWyIgLi4gbWF0aC5mbG9vcihkaXN0KSAuLiAibV0iCiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgb2JqLmxhYmVsLlRleHQgPSBwbHIuRGlzcGxheU5hbWUgLi4gIiBbTi9BXSIKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAplbmQpCgotLSBUb2dnbGUgRVNQCmxvY2FsIGZ1bmN0aW9uIFRvZ2dsZUVTUChzdGF0ZSkKICAgIEVTUEVuYWJsZWQgPSBzdGF0ZQogICAgaWYgbm90IEVTUEVuYWJsZWQgdGhlbgogICAgICAgIGZvciBfLCBvYmogaW4gcGFpcnMoRVNQT2JqZWN0cykgZG8KICAgICAgICAgICAgaWYgb2JqLmJpbGxib2FyZCB0aGVuIG9iai5iaWxsYm9hcmQ6RGVzdHJveSgpIGVuZAogICAgICAgIGVuZAogICAgICAgIEVTUE9iamVjdHMgPSB7fQogICAgZW5kCmVuZAoKLS0gVG9nZ2xlIGRpIFNldHRpbmdzVGFiClNldHRpbmdzVGFiOkNyZWF0ZVRvZ2dsZSh7CiAgICBOYW1lID0gIldhbGxoYWNrIiwKICAgIEN1cnJlbnRWYWx1ZSA9IGZhbHNlLAogICAgRmxhZyA9ICJFU1BOYW1lRGlzdGFuY2UiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbihWYWx1ZSkKICAgICAgICBUb2dnbGVFU1AoVmFsdWUpCiAgICBlbmQsCn0pCgogCi0tID09PT09PT09PT09PT09PT09PT09PT09PT0KLS0gVEFCIFBFTkdBVFVSQU4gKExlbmdrYXApCi0tID09PT09PT09PT09PT09PT09PT09PT09PT0KbG9jYWwgUGxheWVycyA9IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpCmxvY2FsIFVzZXJJbnB1dFNlcnZpY2UgPSBnYW1lOkdldFNlcnZpY2UoIlVzZXJJbnB1dFNlcnZpY2UiKQpsb2NhbCBMb2NhbFBsYXllciA9IFBsYXllcnMuTG9jYWxQbGF5ZXIKCi0tID09PT09PT09PT09PT09PT09PT09PT09PT0KLS0gREVGQVVMVCAmIFNUQVRFCi0tID09PT09PT09PT09PT09PT09PT09PT09PT0KbG9jYWwgZGVmYXVsdFdhbGtTcGVlZCA9IDE2CmxvY2FsIHdhbGtTcGVlZEVuYWJsZWQgPSBmYWxzZSAtLSBkZWZhdWx0IE9GRgpsb2NhbCBpbmZpbml0eUp1bXBFbmFibGVkID0gZmFsc2UKbG9jYWwgY3VycmVudFdhbGtTcGVlZFZhbHVlID0gMTYgLS0gc2lua3JvbiBkZW5nYW4gc2xpZGVyCgotLSBjYWNoZSBjb25uZWN0aW9ucyBzdXBheWEgYmlzYSBkaWtlbG9sYQpsb2NhbCBfaWpKdW1wUmVxQ29ubiwgX2lqSW5wdXRCZWdhbkNvbm4KCi0tIGhlbHBlcjogYW1iaWwgSHVtYW5vaWQgYW1hbgpsb2NhbCBmdW5jdGlvbiBnZXRIdW1hbm9pZCgpCiAgICBsb2NhbCBjaGFyID0gTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyIG9yIExvY2FsUGxheWVyLkNoYXJhY3RlckFkZGVkOldhaXQoKQogICAgcmV0dXJuIGNoYXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCJIdW1hbm9pZCIpCmVuZAoKLS0gaGVscGVyOiBhcHBseSBXYWxrU3BlZWQgc2VzdWFpIHRvZ2dsZSAmIHNsaWRlcgpsb2NhbCBmdW5jdGlvbiBhcHBseVdhbGtTcGVlZCgpCiAgICBsb2NhbCBodW0gPSBnZXRIdW1hbm9pZCgpCiAgICBpZiBub3QgaHVtIHRoZW4gcmV0dXJuIGVuZAogICAgaWYgd2Fsa1NwZWVkRW5hYmxlZCB0aGVuCiAgICAgICAgaHVtLldhbGtTcGVlZCA9IGN1cnJlbnRXYWxrU3BlZWRWYWx1ZQogICAgZWxzZQogICAgICAgIGh1bS5XYWxrU3BlZWQgPSBkZWZhdWx0V2Fsa1NwZWVkCiAgICBlbmQKZW5kCgotLSA9PT09PT09PT09PT09PT09PT09PT09PT09Ci0tIFVJIFNFQ1RJT04KLS0gPT09PT09PT09PT09PT09PT09PT09PT09PQpTZXR0aW5nc1RhYjpDcmVhdGVTZWN0aW9uKCJQZW5nYXR1cmFuIikKCi0tIFdhbGtTcGVlZCBTbGlkZXIKbG9jYWwgV2Fsa1NwZWVkU2xpZGVyID0gU2V0dGluZ3NUYWI6Q3JlYXRlU2xpZGVyKHsKICAgIE5hbWUgPSAiV2Fsa1NwZWVkIiwKICAgIFJhbmdlID0gezE2LCAyMDB9LAogICAgSW5jcmVtZW50ID0gNSwKICAgIFN1ZmZpeCA9ICJTcGVlZCIsCiAgICBDdXJyZW50VmFsdWUgPSBkZWZhdWx0V2Fsa1NwZWVkLAogICAgRmxhZyA9ICJXYWxrU3BlZWRTbGlkZXIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbihWYWx1ZSkKICAgICAgICBjdXJyZW50V2Fsa1NwZWVkVmFsdWUgPSBWYWx1ZQogICAgICAgIGlmIHdhbGtTcGVlZEVuYWJsZWQgdGhlbgogICAgICAgICAgICBhcHBseVdhbGtTcGVlZCgpCiAgICAgICAgZW5kCiAgICBlbmQsCn0pCgotLSBXYWxrU3BlZWQgVG9nZ2xlCmxvY2FsIFdhbGtTcGVlZFRvZ2dsZSA9IFNldHRpbmdzVGFiOkNyZWF0ZVRvZ2dsZSh7CiAgICBOYW1lID0gIldhbGtTcGVlZCBPbi9PZmYiLAogICAgQ3VycmVudFZhbHVlID0gd2Fsa1NwZWVkRW5hYmxlZCwgLS0gZGVmYXVsdCBmYWxzZQogICAgRmxhZyA9ICJXYWxrU3BlZWRUb2dnbGUiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbihWYWx1ZSkKICAgICAgICB3YWxrU3BlZWRFbmFibGVkID0gVmFsdWUKICAgICAgICBhcHBseVdhbGtTcGVlZCgpCiAgICBlbmQsCn0pCgotLSBSZS1hcHBseSBzYWF0IHJlc3Bhd24KTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyQWRkZWQ6Q29ubmVjdChmdW5jdGlvbihjaGFyKQogICAgY2hhcjpXYWl0Rm9yQ2hpbGQoIkh1bWFub2lkIikKICAgIHRhc2suZGVmZXIoYXBwbHlXYWxrU3BlZWQpCmVuZCkKCi0tIFNlZGlraXQg4oCccGVuamFnYeKAnSBrYWxhdSBnYW1lIG1lbmNvYmEgZ2FudGkgV2Fsa1NwZWVkCnRhc2suc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgdHJ1ZSBkbwogICAgICAgIHRhc2sud2FpdCgwLjI1KQogICAgICAgIGlmIHdhbGtTcGVlZEVuYWJsZWQgdGhlbgogICAgICAgICAgICBsb2NhbCBodW0gPSBnZXRIdW1hbm9pZCgpCiAgICAgICAgICAgIGlmIGh1bSBhbmQgaHVtLldhbGtTcGVlZCB+PSBjdXJyZW50V2Fsa1NwZWVkVmFsdWUgdGhlbgogICAgICAgICAgICAgICAgaHVtLldhbGtTcGVlZCA9IGN1cnJlbnRXYWxrU3BlZWRWYWx1ZQogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAplbmQpCgotLSA9PT09PT09PT09PT09PT09PT09PT09PT09Ci0tIElORklOSVRZIEpVTVAKLS0gPT09PT09PT09PT09PT09PT09PT09PT09PQpsb2NhbCBmdW5jdGlvbiBmb3JjZUp1bXAoKQogICAgbG9jYWwgaHVtID0gZ2V0SHVtYW5vaWQoKQogICAgaWYgbm90IGh1bSB0aGVuIHJldHVybiBlbmQKICAgIGxvY2FsIHJvb3QgPSBodW0uUGFyZW50IGFuZCBodW0uUGFyZW50OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikKCiAgICAtLSAxKSBzdGFuZGFyZCBqdW1wIGZsYWcKICAgIGh1bS5KdW1wID0gdHJ1ZQoKICAgIC0tIDIpIHBha3NhIHN0YXRlIGtlIEp1bXBpbmcKICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICBodW06Q2hhbmdlU3RhdGUoRW51bS5IdW1hbm9pZFN0YXRlVHlwZS5KdW1waW5nKQogICAgZW5kKQoKICAgIC0tIDMpIGZhbGxiYWNrOiBkb3Jvbmcga2UgYXRhcwogICAgaWYgcm9vdCB0aGVuCiAgICAgICAgbG9jYWwgdiA9IHJvb3QuQXNzZW1ibHlMaW5lYXJWZWxvY2l0eQogICAgICAgIGxvY2FsIGtpY2tZID0gNTAKICAgICAgICByb290LkFzc2VtYmx5TGluZWFyVmVsb2NpdHkgPSBWZWN0b3IzLm5ldyh2LlgsIG1hdGgubWF4KHYuWSwga2lja1kpLCB2LlopCiAgICBlbmQKZW5kCgotLSBha3RpZmthbiBsaXN0ZW5lciBJbmZpbml0eSBKdW1wCmxvY2FsIGZ1bmN0aW9uIGJpbmRJbmZpbml0eUp1bXBDb25uZWN0aW9ucygpCiAgICAtLSBiZXJzaWhrYW4ga29uZWtzaSBsYW1hCiAgICBpZiBfaWpKdW1wUmVxQ29ubiB0aGVuIF9pakp1bXBSZXFDb25uOkRpc2Nvbm5lY3QoKSBlbmQKICAgIGlmIF9paklucHV0QmVnYW5Db25uIHRoZW4gX2lqSW5wdXRCZWdhbkNvbm46RGlzY29ubmVjdCgpIGVuZAoKICAgIC0tIEV2ZW50IHVuaXZlcnNhbCBqdW1wCiAgICBfaWpKdW1wUmVxQ29ubiA9IFVzZXJJbnB1dFNlcnZpY2UuSnVtcFJlcXVlc3Q6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgaWYgaW5maW5pdHlKdW1wRW5hYmxlZCB0aGVuCiAgICAgICAgICAgIGZvcmNlSnVtcCgpCiAgICAgICAgZW5kCiAgICBlbmQpCgogICAgLS0gVGFtYmFoYW4gdW50dWsgU3BhY2UgLyBHYW1lcGFkIEEKICAgIF9paklucHV0QmVnYW5Db25uID0gVXNlcklucHV0U2VydmljZS5JbnB1dEJlZ2FuOkNvbm5lY3QoZnVuY3Rpb24oaW5wdXQsIGdwZSkKICAgICAgICBpZiBncGUgdGhlbiByZXR1cm4gZW5kCiAgICAgICAgaWYgbm90IGluZmluaXR5SnVtcEVuYWJsZWQgdGhlbiByZXR1cm4gZW5kCgogICAgICAgIGxvY2FsIGtjID0gaW5wdXQuS2V5Q29kZQogICAgICAgIGlmIGtjID09IEVudW0uS2V5Q29kZS5TcGFjZSBvciBrYyA9PSBFbnVtLktleUNvZGUuQnV0dG9uQSB0aGVuCiAgICAgICAgICAgIGZvcmNlSnVtcCgpCiAgICAgICAgZW5kCiAgICBlbmQpCmVuZAoKLS0gVG9nZ2xlIEluZmluaXR5IEp1bXAKU2V0dGluZ3NUYWI6Q3JlYXRlVG9nZ2xlKHsKICAgIE5hbWUgPSAiSW5maW5pdHkgSnVtcCIsCiAgICBDdXJyZW50VmFsdWUgPSBmYWxzZSwKICAgIEZsYWcgPSAiSW5maW5pdHlKdW1wVG9nZ2xlIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oVmFsdWUpCiAgICAgICAgaW5maW5pdHlKdW1wRW5hYmxlZCA9IFZhbHVlCiAgICAgICAgaWYgbm90IF9pakp1bXBSZXFDb25uIG9yIG5vdCBfaWpJbnB1dEJlZ2FuQ29ubiB0aGVuCiAgICAgICAgICAgIGJpbmRJbmZpbml0eUp1bXBDb25uZWN0aW9ucygpCiAgICAgICAgZW5kCiAgICBlbmQsCn0pCgotLSBwYXN0aWthbiBrb25la3NpIHRlci1iaW5kIHNhYXQgc2NyaXB0IGxvYWQKYmluZEluZmluaXR5SnVtcENvbm5lY3Rpb25zKCkKCgpTZXR0aW5nc1RhYjpDcmVhdGVTZWN0aW9uKCJGaXR1ciBGbHkgKEJldGEpIikKLS0gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KLS0gRmx5IFVuaXZlcnNhbCBTdGFibGUgKFBDICYgTW9iaWxlKQotLSA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQoKbG9jYWwgUGxheWVycyA9IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpCmxvY2FsIFVzZXJJbnB1dFNlcnZpY2UgPSBnYW1lOkdldFNlcnZpY2UoIlVzZXJJbnB1dFNlcnZpY2UiKQpsb2NhbCBSdW5TZXJ2aWNlID0gZ2FtZTpHZXRTZXJ2aWNlKCJSdW5TZXJ2aWNlIikKbG9jYWwgTG9jYWxQbGF5ZXIgPSBQbGF5ZXJzLkxvY2FsUGxheWVyCgpsb2NhbCBmbHlpbmcgPSBmYWxzZQpsb2NhbCBmbHlTcGVlZCA9IDUwCmxvY2FsIGZseUJWLCBmbHlHeXJvCmxvY2FsIGZseUNvbm4KCi0tIFVJIChNb2JpbGUgQnV0dG9ucykKbG9jYWwgU2NyZWVuR3VpID0gSW5zdGFuY2UubmV3KCJTY3JlZW5HdWkiKQpTY3JlZW5HdWkuTmFtZSA9ICJGbHlNb2JpbGVVSSIKU2NyZWVuR3VpLlJlc2V0T25TcGF3biA9IGZhbHNlClNjcmVlbkd1aS5QYXJlbnQgPSBnYW1lOkdldFNlcnZpY2UoIkNvcmVHdWkiKQoKbG9jYWwgVXBCdXR0b24gPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQpVcEJ1dHRvbi5TaXplID0gVURpbTIubmV3KDAsIDEwMCwgMCwgNTApClVwQnV0dG9uLlBvc2l0aW9uID0gVURpbTIubmV3KDAuODIsIDAsIDAuNjUsIDApClVwQnV0dG9uLlRleHQgPSAi4qyGIE5haWsiClVwQnV0dG9uLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigwLCAxNzAsIDI1NSkKVXBCdXR0b24uVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwyNTUsMjU1KQpVcEJ1dHRvbi5UZXh0U2NhbGVkID0gdHJ1ZQpVcEJ1dHRvbi5QYXJlbnQgPSBTY3JlZW5HdWkKVXBCdXR0b24uVmlzaWJsZSA9IGZhbHNlCgpsb2NhbCBEb3duQnV0dG9uID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKRG93bkJ1dHRvbi5TaXplID0gVURpbTIubmV3KDAsIDEwMCwgMCwgNTApCkRvd25CdXR0b24uUG9zaXRpb24gPSBVRGltMi5uZXcoMC44MiwgMCwgMC43NSwgMCkKRG93bkJ1dHRvbi5UZXh0ID0gIuKshyBUdXJ1biIKRG93bkJ1dHRvbi5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMCwgMTcwLCAyNTUpCkRvd25CdXR0b24uVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwyNTUsMjU1KQpEb3duQnV0dG9uLlRleHRTY2FsZWQgPSB0cnVlCkRvd25CdXR0b24uUGFyZW50ID0gU2NyZWVuR3VpCkRvd25CdXR0b24uVmlzaWJsZSA9IGZhbHNlCgotLSBJbmZvIFBDCmxvY2FsIEluZm9MYWJlbCA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIikKSW5mb0xhYmVsLlNpemUgPSBVRGltMi5uZXcoMCwgMjYwLCAwLCA3MCkKSW5mb0xhYmVsLlBvc2l0aW9uID0gVURpbTIubmV3KDAuNywgMCwgMC4wNSwgMCkKSW5mb0xhYmVsLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAwLjMKSW5mb0xhYmVsLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigwLDAsMCkKSW5mb0xhYmVsLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsMjU1LDI1NSkKSW5mb0xhYmVsLkZvbnQgPSBFbnVtLkZvbnQuU291cmNlU2Fuc0JvbGQKSW5mb0xhYmVsLlRleHRTaXplID0gMTgKSW5mb0xhYmVsLlZpc2libGUgPSBmYWxzZQpJbmZvTGFiZWwuVGV4dCA9ICJGbHkgQ29udHJvbHM6XG5XQVNEID0gR2VyYWtcblNwYWNlID0gTmFpa1xuU2hpZnQgPSBUdXJ1biIKSW5mb0xhYmVsLlBhcmVudCA9IFNjcmVlbkd1aQoKbG9jYWwgdXBQcmVzc2VkLCBkb3duUHJlc3NlZCA9IGZhbHNlLCBmYWxzZQpVcEJ1dHRvbi5Nb3VzZUJ1dHRvbjFEb3duOkNvbm5lY3QoZnVuY3Rpb24oKSB1cFByZXNzZWQgPSB0cnVlIGVuZCkKVXBCdXR0b24uTW91c2VCdXR0b24xVXA6Q29ubmVjdChmdW5jdGlvbigpIHVwUHJlc3NlZCA9IGZhbHNlIGVuZCkKRG93bkJ1dHRvbi5Nb3VzZUJ1dHRvbjFEb3duOkNvbm5lY3QoZnVuY3Rpb24oKSBkb3duUHJlc3NlZCA9IHRydWUgZW5kKQpEb3duQnV0dG9uLk1vdXNlQnV0dG9uMVVwOkNvbm5lY3QoZnVuY3Rpb24oKSBkb3duUHJlc3NlZCA9IGZhbHNlIGVuZCkKCi0tIFN0YXJ0IEZseQpsb2NhbCBmdW5jdGlvbiBzdGFydEZseSgpCiAgICBpZiBmbHlpbmcgdGhlbiByZXR1cm4gZW5kCiAgICBsb2NhbCBjaGFyID0gTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyCiAgICBpZiBub3QgY2hhciB0aGVuIHJldHVybiBlbmQKICAgIGxvY2FsIGhycCA9IGNoYXI6V2FpdEZvckNoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikKCiAgICBmbHlpbmcgPSB0cnVlCgogICAgLS0gQm9keVZlbG9jaXR5IHVudHVrIGRvcm9uZyBrYXJha3RlcgogICAgZmx5QlYgPSBJbnN0YW5jZS5uZXcoIkJvZHlWZWxvY2l0eSIpCiAgICBmbHlCVi5NYXhGb3JjZSA9IFZlY3RvcjMubmV3KDFlNSwgMWU1LCAxZTUpCiAgICBmbHlCVi5WZWxvY2l0eSA9IFZlY3RvcjMubmV3KDAsMCwwKQogICAgZmx5QlYuUGFyZW50ID0gaHJwCgogICAgLS0gQm9keUd5cm8gYmlhciBuZ2lrdXQgYXJhaCBrYW1lcmEKICAgIGZseUd5cm8gPSBJbnN0YW5jZS5uZXcoIkJvZHlHeXJvIikKICAgIGZseUd5cm8uTWF4VG9ycXVlID0gVmVjdG9yMy5uZXcoMWU1LCAxZTUsIDFlNSkKICAgIGZseUd5cm8uQ0ZyYW1lID0gaHJwLkNGcmFtZQogICAgZmx5R3lyby5QYXJlbnQgPSBocnAKCiAgICBpZiBVc2VySW5wdXRTZXJ2aWNlLlRvdWNoRW5hYmxlZCB0aGVuCiAgICAgICAgVXBCdXR0b24uVmlzaWJsZSA9IHRydWUKICAgICAgICBEb3duQnV0dG9uLlZpc2libGUgPSB0cnVlCiAgICBlbHNlaWYgVXNlcklucHV0U2VydmljZS5LZXlib2FyZEVuYWJsZWQgdGhlbgogICAgICAgIEluZm9MYWJlbC5WaXNpYmxlID0gdHJ1ZQogICAgZW5kCgogICAgZmx5Q29ubiA9IFJ1blNlcnZpY2UuUmVuZGVyU3RlcHBlZDpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICBpZiBub3QgZmx5aW5nIHRoZW4gcmV0dXJuIGVuZAogICAgICAgIGxvY2FsIGNhbUNGID0gd29ya3NwYWNlLkN1cnJlbnRDYW1lcmEuQ0ZyYW1lCiAgICAgICAgbG9jYWwgbW92ZURpciA9IFZlY3RvcjMubmV3KCkKCiAgICAgICAgLS0gUEMKICAgICAgICBpZiBVc2VySW5wdXRTZXJ2aWNlLktleWJvYXJkRW5hYmxlZCB0aGVuCiAgICAgICAgICAgIGlmIFVzZXJJbnB1dFNlcnZpY2U6SXNLZXlEb3duKEVudW0uS2V5Q29kZS5XKSB0aGVuCiAgICAgICAgICAgICAgICBtb3ZlRGlyICs9IGNhbUNGLkxvb2tWZWN0b3IKICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGlmIFVzZXJJbnB1dFNlcnZpY2U6SXNLZXlEb3duKEVudW0uS2V5Q29kZS5TKSB0aGVuCiAgICAgICAgICAgICAgICBtb3ZlRGlyIC09IGNhbUNGLkxvb2tWZWN0b3IKICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGlmIFVzZXJJbnB1dFNlcnZpY2U6SXNLZXlEb3duKEVudW0uS2V5Q29kZS5BKSB0aGVuCiAgICAgICAgICAgICAgICBtb3ZlRGlyIC09IGNhbUNGLlJpZ2h0VmVjdG9yCiAgICAgICAgICAgIGVuZAogICAgICAgICAgICBpZiBVc2VySW5wdXRTZXJ2aWNlOklzS2V5RG93bihFbnVtLktleUNvZGUuRCkgdGhlbgogICAgICAgICAgICAgICAgbW92ZURpciArPSBjYW1DRi5SaWdodFZlY3RvcgogICAgICAgICAgICBlbmQKICAgICAgICAgICAgaWYgVXNlcklucHV0U2VydmljZTpJc0tleURvd24oRW51bS5LZXlDb2RlLlNwYWNlKSB0aGVuCiAgICAgICAgICAgICAgICBtb3ZlRGlyICs9IFZlY3RvcjMubmV3KDAsMSwwKQogICAgICAgICAgICBlbmQKICAgICAgICAgICAgaWYgVXNlcklucHV0U2VydmljZTpJc0tleURvd24oRW51bS5LZXlDb2RlLkxlZnRTaGlmdCkgdGhlbgogICAgICAgICAgICAgICAgbW92ZURpciAtPSBWZWN0b3IzLm5ldygwLDEsMCkKICAgICAgICAgICAgZW5kCiAgICAgICAgZWxzZWlmIFVzZXJJbnB1dFNlcnZpY2UuVG91Y2hFbmFibGVkIHRoZW4KICAgICAgICAgICAgbG9jYWwgaHVtID0gY2hhcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoIkh1bWFub2lkIikKICAgICAgICAgICAgaWYgaHVtIHRoZW4KICAgICAgICAgICAgICAgIG1vdmVEaXIgKz0gaHVtLk1vdmVEaXJlY3Rpb24KICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGlmIHVwUHJlc3NlZCB0aGVuCiAgICAgICAgICAgICAgICBtb3ZlRGlyICs9IFZlY3RvcjMubmV3KDAsMSwwKQogICAgICAgICAgICBlbmQKICAgICAgICAgICAgaWYgZG93blByZXNzZWQgdGhlbgogICAgICAgICAgICAgICAgbW92ZURpciAtPSBWZWN0b3IzLm5ldygwLDEsMCkKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCgogICAgICAgIGZseUd5cm8uQ0ZyYW1lID0gY2FtQ0YKICAgICAgICBpZiBtb3ZlRGlyLk1hZ25pdHVkZSA+IDAgdGhlbgogICAgICAgICAgICBmbHlCVi5WZWxvY2l0eSA9IG1vdmVEaXIuVW5pdCAqIGZseVNwZWVkCiAgICAgICAgZWxzZQogICAgICAgICAgICBmbHlCVi5WZWxvY2l0eSA9IFZlY3RvcjMubmV3KDAsMCwwKQogICAgICAgIGVuZAogICAgZW5kKQplbmQKCi0tIFN0b3AgRmx5CmxvY2FsIGZ1bmN0aW9uIHN0b3BGbHkoKQogICAgZmx5aW5nID0gZmFsc2UKICAgIGlmIGZseUNvbm4gdGhlbiBmbHlDb25uOkRpc2Nvbm5lY3QoKSBmbHlDb25uID0gbmlsIGVuZAogICAgaWYgZmx5QlYgdGhlbiBmbHlCVjpEZXN0cm95KCkgZmx5QlYgPSBuaWwgZW5kCiAgICBpZiBmbHlHeXJvIHRoZW4gZmx5R3lybzpEZXN0cm95KCkgZmx5R3lybyA9IG5pbCBlbmQKICAgIFVwQnV0dG9uLlZpc2libGUgPSBmYWxzZQogICAgRG93bkJ1dHRvbi5WaXNpYmxlID0gZmFsc2UKICAgIEluZm9MYWJlbC5WaXNpYmxlID0gZmFsc2UKZW5kCgotLSBUb2dnbGUKU2V0dGluZ3NUYWI6Q3JlYXRlVG9nZ2xlKHsKICAgIE5hbWUgPSAiRmx5IChTdGFibGUpIiwKICAgIEN1cnJlbnRWYWx1ZSA9IGZhbHNlLAogICAgRmxhZyA9ICJGbHlUb2dnbGVTdGFibGUiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbihWYWx1ZSkKICAgICAgICBpZiBWYWx1ZSB0aGVuCiAgICAgICAgICAgIHN0YXJ0Rmx5KCkKICAgICAgICBlbHNlCiAgICAgICAgICAgIHN0b3BGbHkoKQogICAgICAgIGVuZAogICAgZW5kLAp9KQoKLS0gU3BlZWQgU2xpZGVyClNldHRpbmdzVGFiOkNyZWF0ZVNsaWRlcih7CiAgICBOYW1lID0gIkZseSBTcGVlZCIsCiAgICBSYW5nZSA9IHsxMCwgMjAwfSwKICAgIEluY3JlbWVudCA9IDUsCiAgICBTdWZmaXggPSAiU3BlZWQiLAogICAgQ3VycmVudFZhbHVlID0gZmx5U3BlZWQsCiAgICBGbGFnID0gIkZseVNwZWVkU2xpZGVyU3RhYmxlIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oVmFsdWUpCiAgICAgICAgZmx5U3BlZWQgPSBWYWx1ZQogICAgZW5kLAp9KQoKCi0tID09PT09PT09PT09PT09PT09PT09PT09PQotLSBTZW5zb3IgTmFtYSBTYXlhIChBbnRpIEtlZGlwKQotLSA9PT09PT09PT09PT09PT09PT09PT09PT0KbG9jYWwgUGxheWVycyA9IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpCmxvY2FsIFJ1blNlcnZpY2UgPSBnYW1lOkdldFNlcnZpY2UoIlJ1blNlcnZpY2UiKQpsb2NhbCBscCA9IFBsYXllcnMuTG9jYWxQbGF5ZXIKbG9jYWwgcmFuZG9tQWN0aXZlID0gZmFsc2UKbG9jYWwgbmFtZUxvb3AgPSBuaWwKCmxvY2FsIGZha2VOYW1lcyA9IHsKICAgICJPcmFuZ01pc3Rlcml1cyIsIlBsYXllclgiLCJOb29iQmVyZ2F5YSIsIlNpVGVtYnVzIiwiSGFudHVHdW51bmciCn0KCmxvY2FsIGZ1bmN0aW9uIGdldFJhbmRvbU5hbWUoKQogICAgcmV0dXJuIGZha2VOYW1lc1ttYXRoLnJhbmRvbSgxLCAjZmFrZU5hbWVzKV0KZW5kCgpsb2NhbCBmdW5jdGlvbiBhcHBseU5vTmFtZShjaGFyKQogICAgbG9jYWwgaHVtYW5vaWQgPSBjaGFyOldhaXRGb3JDaGlsZCgiSHVtYW5vaWQiLCA1KQogICAgbG9jYWwgaGVhZCA9IGNoYXI6V2FpdEZvckNoaWxkKCJIZWFkIiwgNSkKICAgIGlmIG5vdCBodW1hbm9pZCBvciBub3QgaGVhZCB0aGVuIHJldHVybiBlbmQKCiAgICAtLSBzZW1idW55aWthbiBsYWJlbCBkZWZhdWx0CiAgICBodW1hbm9pZC5OYW1lRGlzcGxheURpc3RhbmNlID0gMAogICAgaHVtYW5vaWQuRGlzcGxheURpc3RhbmNlVHlwZSA9IEVudW0uSHVtYW5vaWREaXNwbGF5RGlzdGFuY2VUeXBlLk5vbmUKICAgIGh1bWFub2lkLkRpc3BsYXlOYW1lID0gIiIKCiAgICAtLSBoYXB1cyBzZW11YSBCaWxsYm9hcmQgYmF3YWFuCiAgICBmb3IgXywgZ3VpIGluIGlwYWlycyhoZWFkOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgaWYgZ3VpOklzQSgiQmlsbGJvYXJkR3VpIikgYW5kIGd1aS5OYW1lIH49ICJGYWtlTmFtZSIgdGhlbgogICAgICAgICAgICBndWk6RGVzdHJveSgpCiAgICAgICAgZW5kCiAgICBlbmQKCiAgICAtLSBiaWtpbiBmYWtlIG5hbWUgc2VuZGlyaSBrYWxhdSBiZWx1bSBhZGEKICAgIGlmIG5vdCBoZWFkOkZpbmRGaXJzdENoaWxkKCJGYWtlTmFtZSIpIHRoZW4KICAgICAgICBsb2NhbCBiaWxsYm9hcmQgPSBJbnN0YW5jZS5uZXcoIkJpbGxib2FyZEd1aSIpCiAgICAgICAgYmlsbGJvYXJkLk5hbWUgPSAiRmFrZU5hbWUiCiAgICAgICAgYmlsbGJvYXJkLkFkb3JuZWUgPSBoZWFkCiAgICAgICAgYmlsbGJvYXJkLlNpemUgPSBVRGltMi5uZXcoMCwgMjAwLCAwLCA1MCkKICAgICAgICBiaWxsYm9hcmQuU3R1ZHNPZmZzZXQgPSBWZWN0b3IzLm5ldygwLCAyLjUsIDApCiAgICAgICAgYmlsbGJvYXJkLkFsd2F5c09uVG9wID0gdHJ1ZQogICAgICAgIGJpbGxib2FyZC5QYXJlbnQgPSBoZWFkCgogICAgICAgIGxvY2FsIHRleHQgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIpCiAgICAgICAgdGV4dC5TaXplID0gVURpbTIubmV3KDEsIDAsIDEsIDApCiAgICAgICAgdGV4dC5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQogICAgICAgIHRleHQuVGV4dENvbG9yMyA9IENvbG9yMy5uZXcoMSwxLDEpCiAgICAgICAgdGV4dC5UZXh0U3Ryb2tlVHJhbnNwYXJlbmN5ID0gMAogICAgICAgIHRleHQuRm9udCA9IEVudW0uRm9udC5Tb3VyY2VTYW5zQm9sZAogICAgICAgIHRleHQuVGV4dFNjYWxlZCA9IHRydWUKICAgICAgICB0ZXh0LlRleHQgPSBnZXRSYW5kb21OYW1lKCkKICAgICAgICB0ZXh0LlBhcmVudCA9IGJpbGxib2FyZAogICAgZW5kCgogICAgLS0gbG9vcCBhbnRpLWtlZGlwIChoYXB1cyBuYW1lIHRhZyBhc2xpIHNldGlhcCBmcmFtZSkKICAgIGlmIG5hbWVMb29wIHRoZW4gbmFtZUxvb3A6RGlzY29ubmVjdCgpIGVuZAogICAgbmFtZUxvb3AgPSBSdW5TZXJ2aWNlLlJlbmRlclN0ZXBwZWQ6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgaWYgbm90IHJhbmRvbUFjdGl2ZSB0aGVuIHJldHVybiBlbmQKICAgICAgICBpZiBoZWFkIHRoZW4KICAgICAgICAgICAgZm9yIF8sIGd1aSBpbiBpcGFpcnMoaGVhZDpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgaWYgZ3VpOklzQSgiQmlsbGJvYXJkR3VpIikgYW5kIGd1aS5OYW1lIH49ICJGYWtlTmFtZSIgdGhlbgogICAgICAgICAgICAgICAgICAgIGd1aTpEZXN0cm95KCkKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCkKZW5kCgpsb2NhbCBmdW5jdGlvbiByZXNldE5hbWUoY2hhcikKICAgIGlmIG5hbWVMb29wIHRoZW4KICAgICAgICBuYW1lTG9vcDpEaXNjb25uZWN0KCkKICAgICAgICBuYW1lTG9vcCA9IG5pbAogICAgZW5kCiAgICBsb2NhbCBoZWFkID0gY2hhcjpGaW5kRmlyc3RDaGlsZCgiSGVhZCIpCiAgICBpZiBoZWFkIGFuZCBoZWFkOkZpbmRGaXJzdENoaWxkKCJGYWtlTmFtZSIpIHRoZW4KICAgICAgICBoZWFkLkZha2VOYW1lOkRlc3Ryb3koKQogICAgZW5kCiAgICBsb2NhbCBodW1hbm9pZCA9IGNoYXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikKICAgIGlmIGh1bWFub2lkIHRoZW4KICAgICAgICBodW1hbm9pZC5EaXNwbGF5RGlzdGFuY2VUeXBlID0gRW51bS5IdW1hbm9pZERpc3BsYXlEaXN0YW5jZVR5cGUuVmlld2VyCiAgICAgICAgaHVtYW5vaWQuTmFtZURpc3BsYXlEaXN0YW5jZSA9IDEwMAogICAgICAgIGh1bWFub2lkLkRpc3BsYXlOYW1lID0gbHAuTmFtZQogICAgZW5kCmVuZAoKU2V0dGluZ3NUYWI6Q3JlYXRlVG9nZ2xlKHsKICAgTmFtZSA9ICJTZW5zb3IgTmFtYSIsCiAgIEN1cnJlbnRWYWx1ZSA9IGZhbHNlLAogICBGbGFnID0gIk15RmFrZU5hbWVUb2dnbGUiLAogICBDYWxsYmFjayA9IGZ1bmN0aW9uKFZhbHVlKQogICAgICAgIHJhbmRvbUFjdGl2ZSA9IFZhbHVlCiAgICAgICAgaWYgcmFuZG9tQWN0aXZlIHRoZW4KICAgICAgICAgICAgaWYgbHAuQ2hhcmFjdGVyIHRoZW4gYXBwbHlOb05hbWUobHAuQ2hhcmFjdGVyKSBlbmQKICAgICAgICAgICAgbHAuQ2hhcmFjdGVyQWRkZWQ6Q29ubmVjdChmdW5jdGlvbihjaGFyKQogICAgICAgICAgICAgICAgdGFzay53YWl0KDEpCiAgICAgICAgICAgICAgICBpZiByYW5kb21BY3RpdmUgdGhlbgogICAgICAgICAgICAgICAgICAgIGFwcGx5Tm9OYW1lKGNoYXIpCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKQogICAgICAgIGVsc2UKICAgICAgICAgICAgaWYgbHAuQ2hhcmFjdGVyIHRoZW4gcmVzZXROYW1lKGxwLkNoYXJhY3RlcikgZW5kCiAgICAgICAgZW5kCiAgIGVuZAp9KQoKCgotLSA9PT09PT09PT09PT09PT09PT09PT09PT0KLS0gRnVuVGFiOiBGb2xsb3cgKyBMZW5nYW4gSm9nZXQgKyBLZXBhbGEgVGVyYmFsaWsKLS0gPT09PT09PT09PT09PT09PT09PT09PT09CmxvY2FsIFBsYXllcnMgPSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKQpsb2NhbCBSdW5TZXJ2aWNlID0gZ2FtZTpHZXRTZXJ2aWNlKCJSdW5TZXJ2aWNlIikKbG9jYWwgTG9jYWxQbGF5ZXIgPSBQbGF5ZXJzLkxvY2FsUGxheWVyCgpsb2NhbCBGdW5UYWIgPSBXaW5kb3c6Q3JlYXRlVGFiKCJGdW4iLCA0NDgzMzYyNDU4KQpGdW5UYWI6Q3JlYXRlU2VjdGlvbigiVHJvbGxpbmciKQpsb2NhbCBUYXJnZXRQbGF5ZXIgPSBuaWwKbG9jYWwgRm9sbG93Q29ubmVjdGlvbgpsb2NhbCBKb2dldENvbm5lY3Rpb24KCmxvY2FsIEpvZ2V0QW1wbGl0dWRlID0gMzAgLS0gZGVyYWphdApsb2NhbCBKb2dldFNwZWVkID0gNSAtLSBrZWNlcGF0YW4KCi0tIERyb3Bkb3duIHBpbGloIHBsYXllcgpsb2NhbCBmdW5jdGlvbiBSZWZyZXNoUGxheWVyTGlzdCgpCiAgICBsb2NhbCBuYW1lcyA9IHt9CiAgICBmb3IgXywgcGxyIGluIGlwYWlycyhQbGF5ZXJzOkdldFBsYXllcnMoKSkgZG8KICAgICAgICBpZiBwbHIgfj0gTG9jYWxQbGF5ZXIgdGhlbgogICAgICAgICAgICB0YWJsZS5pbnNlcnQobmFtZXMsIHBsci5EaXNwbGF5TmFtZSkKICAgICAgICBlbmQKICAgIGVuZAogICAgcmV0dXJuIG5hbWVzCmVuZAoKbG9jYWwgUGxheWVyRHJvcGRvd24gPSBGdW5UYWI6Q3JlYXRlRHJvcGRvd24oewogICAgTmFtZSA9ICLwn5KD8J+PuyBQaWxpaCBQbGF5ZXIiLAogICAgT3B0aW9ucyA9IFJlZnJlc2hQbGF5ZXJMaXN0KCksCiAgICBDdXJyZW50T3B0aW9uID0ge30sCiAgICBGbGFnID0gIkZ1blBsYXllckRyb3Bkb3duIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24ob3B0aW9uKQogICAgICAgIGZvciBfLCBwbHIgaW4gaXBhaXJzKFBsYXllcnM6R2V0UGxheWVycygpKSBkbwogICAgICAgICAgICBpZiBwbHIuRGlzcGxheU5hbWUgPT0gb3B0aW9uWzFdIHRoZW4KICAgICAgICAgICAgICAgIFRhcmdldFBsYXllciA9IHBscgogICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKfSkKCkZ1blRhYjpDcmVhdGVCdXR0b24oewogICAgTmFtZSA9ICLwn5KD8J+PuyBSZWZyZXNoIFBsYXllciBMaXN0IiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIFBsYXllckRyb3Bkb3duOlJlZnJlc2goUmVmcmVzaFBsYXllckxpc3QoKSwgdHJ1ZSkKICAgIGVuZAp9KQoKLS0gVG9nZ2xlIEZvbGxvdyBQbGF5ZXIKbG9jYWwgRm9sbG93RW5hYmxlZCA9IGZhbHNlCkZ1blRhYjpDcmVhdGVUb2dnbGUoewogICAgTmFtZSA9ICLwn4+DIElrdXRpIFBsYXllciIsCiAgICBDdXJyZW50VmFsdWUgPSBmYWxzZSwKICAgIEZsYWcgPSAiRm9sbG93VG9nZ2xlIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24odmFsdWUpCiAgICAgICAgRm9sbG93RW5hYmxlZCA9IHZhbHVlCiAgICAgICAgaWYgRm9sbG93RW5hYmxlZCB0aGVuCiAgICAgICAgICAgIEZvbGxvd0Nvbm5lY3Rpb24gPSBSdW5TZXJ2aWNlLkhlYXJ0YmVhdDpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGlmIFRhcmdldFBsYXllciBhbmQgVGFyZ2V0UGxheWVyLkNoYXJhY3RlciBhbmQgVGFyZ2V0UGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBsb2NhbCBjaGFyID0gTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyCiAgICAgICAgICAgICAgICAgICAgaWYgY2hhciBhbmQgY2hhcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgY2hhci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IENGcmFtZS5uZXcoVGFyZ2V0UGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uICsgVmVjdG9yMy5uZXcoMCwwLjUsMCkpCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKQogICAgICAgIGVsc2UKICAgICAgICAgICAgaWYgRm9sbG93Q29ubmVjdGlvbiB0aGVuCiAgICAgICAgICAgICAgICBGb2xsb3dDb25uZWN0aW9uOkRpc2Nvbm5lY3QoKQogICAgICAgICAgICAgICAgRm9sbG93Q29ubmVjdGlvbiA9IG5pbAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAp9KQpGdW5UYWI6Q3JlYXRlU2VjdGlvbigiRW1vdGUiKQpsb2NhbCBKb2dldEVuYWJsZWQgPSBmYWxzZQpGdW5UYWI6Q3JlYXRlVG9nZ2xlKHsKICAgIE5hbWUgPSAi8J+XvyBFcm9yIChCaWtpbiBUZXJiYW5nKSIsCiAgICBDdXJyZW50VmFsdWUgPSBmYWxzZSwKICAgIEZsYWcgPSAiSm9nZXRUb2dnbGUiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbih2YWx1ZSkKICAgICAgICBKb2dldEVuYWJsZWQgPSB2YWx1ZQogICAgICAgIGlmIEpvZ2V0RW5hYmxlZCB0aGVuCiAgICAgICAgICAgIGxvY2FsIHQgPSAwCiAgICAgICAgICAgIEpvZ2V0Q29ubmVjdGlvbiA9IFJ1blNlcnZpY2UuSGVhcnRiZWF0OkNvbm5lY3QoZnVuY3Rpb24oZHQpCiAgICAgICAgICAgICAgICB0ICs9IGR0ICogSm9nZXRTcGVlZAogICAgICAgICAgICAgICAgbG9jYWwgY2hhciA9IExvY2FsUGxheWVyLkNoYXJhY3RlcgogICAgICAgICAgICAgICAgaWYgY2hhciB0aGVuCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgbGVmdEFybSA9IGNoYXI6RmluZEZpcnN0Q2hpbGQoIkxlZnRVcHBlckFybSIpIG9yIGNoYXI6RmluZEZpcnN0Q2hpbGQoIkxlZnQgQXJtIikKICAgICAgICAgICAgICAgICAgICBsb2NhbCByaWdodEFybSA9IGNoYXI6RmluZEZpcnN0Q2hpbGQoIlJpZ2h0VXBwZXJBcm0iKSBvciBjaGFyOkZpbmRGaXJzdENoaWxkKCJSaWdodCBBcm0iKQogICAgICAgICAgICAgICAgICAgIGlmIGxlZnRBcm0gdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBsZWZ0QXJtLkNGcmFtZSA9IGxlZnRBcm0uQ0ZyYW1lICogQ0ZyYW1lLkFuZ2xlcygxLCAwLCBtYXRoLnJhZChtYXRoLnNpbih0KSAqIEpvZ2V0QW1wbGl0dWRlKSkKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBpZiByaWdodEFybSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIHJpZ2h0QXJtLkNGcmFtZSA9IHJpZ2h0QXJtLkNGcmFtZSAqIENGcmFtZS5BbmdsZXMoMSwgMCwgbWF0aC5yYWQoLW1hdGguc2luKHQpICogSm9nZXRBbXBsaXR1ZGUpKQogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCkKICAgICAgICBlbHNlCiAgICAgICAgICAgIGlmIEpvZ2V0Q29ubmVjdGlvbiB0aGVuCiAgICAgICAgICAgICAgICBKb2dldENvbm5lY3Rpb246RGlzY29ubmVjdCgpCiAgICAgICAgICAgICAgICBKb2dldENvbm5lY3Rpb24gPSBuaWwKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKfSkKCi0tIFRvZ2dsZSBLZXBhbGEgZGkgYmF3YWggLyB0ZXJiYWxpayBwZXJtYW5lbgpsb2NhbCBJbnZlcnRFbmFibGVkID0gZmFsc2UKbG9jYWwgSW52ZXJ0Q29ubmVjdGlvbgoKRnVuVGFiOkNyZWF0ZVRvZ2dsZSh7CiAgICBOYW1lID0gIvCfl78gS2VwYWxhIEtlYmF3YWgiLAogICAgQ3VycmVudFZhbHVlID0gZmFsc2UsCiAgICBGbGFnID0gIkludmVydFRvZ2dsZSIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKHZhbHVlKQogICAgICAgIEludmVydEVuYWJsZWQgPSB2YWx1ZQoKICAgICAgICBpZiBJbnZlcnRFbmFibGVkIHRoZW4KICAgICAgICAgICAgaWYgSW52ZXJ0Q29ubmVjdGlvbiB0aGVuIEludmVydENvbm5lY3Rpb246RGlzY29ubmVjdCgpIGVuZAogICAgICAgICAgICBJbnZlcnRDb25uZWN0aW9uID0gUnVuU2VydmljZS5IZWFydGJlYXQ6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBsb2NhbCBjaGFyID0gTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyCiAgICAgICAgICAgICAgICBpZiBjaGFyIGFuZCBjaGFyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgdGhlbgogICAgICAgICAgICAgICAgICAgIGxvY2FsIHJvb3QgPSBjaGFyLkh1bWFub2lkUm9vdFBhcnQKICAgICAgICAgICAgICAgICAgICAtLSBNZW1hc3Rpa2FuIHNlbGFsdSB0ZXJiYWxpawogICAgICAgICAgICAgICAgICAgIHJvb3QuQ0ZyYW1lID0gQ0ZyYW1lLm5ldyhyb290LlBvc2l0aW9uKSAqIENGcmFtZS5BbmdsZXMobWF0aC5yYWQoMTgwKSwxMCwwKQogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCkKICAgICAgICBlbHNlCiAgICAgICAgICAgIGlmIEludmVydENvbm5lY3Rpb24gdGhlbgogICAgICAgICAgICAgICAgSW52ZXJ0Q29ubmVjdGlvbjpEaXNjb25uZWN0KCkKICAgICAgICAgICAgICAgIEludmVydENvbm5lY3Rpb24gPSBuaWwKICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIC0tIEtlbWJhbGlrYW4gbm9ybWFsCiAgICAgICAgICAgIGxvY2FsIGNoYXIgPSBMb2NhbFBsYXllci5DaGFyYWN0ZXIKICAgICAgICAgICAgaWYgY2hhciBhbmQgY2hhcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIHRoZW4KICAgICAgICAgICAgICAgIGxvY2FsIHJvb3QgPSBjaGFyLkh1bWFub2lkUm9vdFBhcnQKICAgICAgICAgICAgICAgIHJvb3QuQ0ZyYW1lID0gQ0ZyYW1lLm5ldyhyb290LlBvc2l0aW9uKSAqIENGcmFtZS5BbmdsZXMoMCwwLDApCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCn0pCgoKbG9jYWwgUGxheWVycyA9IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpCmxvY2FsIGxwID0gUGxheWVycy5Mb2NhbFBsYXllcgpsb2NhbCBzaXRBY3RpdmUgPSBmYWxzZQpsb2NhbCBjb25zdHJhaW50ID0ge30KCi0tIGNhcmkgcGxheWVyIHRlcmRla2F0CmxvY2FsIGZ1bmN0aW9uIGdldE5lYXJlc3RQbGF5ZXIoKQogICAgbG9jYWwgbmVhcmVzdCwgZGlzdCA9IG5pbCwgbWF0aC5odWdlCiAgICBmb3IgXywgcGxyIGluIHBhaXJzKFBsYXllcnM6R2V0UGxheWVycygpKSBkbwogICAgICAgIGlmIHBsciB+PSBscCBhbmQgcGxyLkNoYXJhY3RlciBhbmQgcGxyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIHRoZW4KICAgICAgICAgICAgbG9jYWwgZCA9IChscC5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiAtIHBsci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlCiAgICAgICAgICAgIGlmIGQgPCBkaXN0IHRoZW4KICAgICAgICAgICAgICAgIGRpc3QgPSBkCiAgICAgICAgICAgICAgICBuZWFyZXN0ID0gcGxyCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCiAgICByZXR1cm4gbmVhcmVzdAplbmQKCi0tIGR1ZHVrIGRpIGF0YXMgcGxheWVyCmxvY2FsIGZ1bmN0aW9uIHNpdE9uUGxheWVyKHRhcmdldCkKICAgIGlmIG5vdCB0YXJnZXQgb3Igbm90IHRhcmdldC5DaGFyYWN0ZXIgdGhlbiByZXR1cm4gZW5kCiAgICBsb2NhbCBteUhSUCA9IGxwLkNoYXJhY3RlcjpXYWl0Rm9yQ2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKQogICAgbG9jYWwgdGFyZ2V0SFJQID0gdGFyZ2V0LkNoYXJhY3RlcjpXYWl0Rm9yQ2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKQoKICAgIC0tIGJlcnNpaGthbiBjb25zdHJhaW50IGxhbWEKICAgIGZvciBfLCB2IGluIHBhaXJzKG15SFJQOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgaWYgdjpJc0EoIkFsaWduUG9zaXRpb24iKSBvciB2OklzQSgiQWxpZ25PcmllbnRhdGlvbiIpIG9yIHY6SXNBKCJBdHRhY2htZW50IikgdGhlbgogICAgICAgICAgICB2OkRlc3Ryb3koKQogICAgICAgIGVuZAogICAgZW5kCgogICAgLS0gYmlraW4gYXR0YWNobWVudAogICAgbG9jYWwgYTAgPSBJbnN0YW5jZS5uZXcoIkF0dGFjaG1lbnQiLCBteUhSUCkKICAgIGxvY2FsIGExID0gSW5zdGFuY2UubmV3KCJBdHRhY2htZW50IiwgdGFyZ2V0SFJQKQogICAgYTAuUG9zaXRpb24gPSBWZWN0b3IzLm5ldygwLCAyLCAwKSAtLSBkdWR1ayBkaSBhdGFzIGtlcGFsYQoKICAgIGxvY2FsIGFwID0gSW5zdGFuY2UubmV3KCJBbGlnblBvc2l0aW9uIiwgbXlIUlApCiAgICBhcC5NYXhGb3JjZSA9IDk5OTk5OQogICAgYXAuUmVzcG9uc2l2ZW5lc3MgPSAyMDAKICAgIGFwLkF0dGFjaG1lbnQwID0gYTAKICAgIGFwLkF0dGFjaG1lbnQxID0gYTEKCiAgICBsb2NhbCBhbyA9IEluc3RhbmNlLm5ldygiQWxpZ25PcmllbnRhdGlvbiIsIG15SFJQKQogICAgYW8uTWF4VG9ycXVlID0gOTk5OTk5CiAgICBhby5SZXNwb25zaXZlbmVzcyA9IDIwMAogICAgYW8uQXR0YWNobWVudDAgPSBhMAogICAgYW8uQXR0YWNobWVudDEgPSBhMQoKICAgIGNvbnN0cmFpbnQgPSB7YXAsIGFvLCBhMCwgYTF9CmVuZAoKLS0gbGVwYXMgZHVkdWsKbG9jYWwgZnVuY3Rpb24gdW5TaXQoKQogICAgaWYgbHAuQ2hhcmFjdGVyIGFuZCBscC5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSB0aGVuCiAgICAgICAgZm9yIF8sIHYgaW4gcGFpcnMobHAuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQ6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgaWYgdjpJc0EoIkFsaWduUG9zaXRpb24iKSBvciB2OklzQSgiQWxpZ25PcmllbnRhdGlvbiIpIG9yIHY6SXNBKCJBdHRhY2htZW50IikgdGhlbgogICAgICAgICAgICAgICAgdjpEZXN0cm95KCkKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKICAgIGNvbnN0cmFpbnQgPSB7fQplbmQKCkZ1blRhYjpDcmVhdGVUb2dnbGUoewogICAgTmFtZSA9ICLwn5W6TXV0YXItTXV0YXIpIiwKICAgIEN1cnJlbnRWYWx1ZSA9IGZhbHNlLAogICAgRmxhZyA9ICJTcGluQm9keUZhc3QiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbihWYWx1ZSkKICAgICAgICBzcGluQWN0aXZlID0gVmFsdWUKICAgICAgICBpZiBzcGluQWN0aXZlIHRoZW4KICAgICAgICAgICAgUmF5ZmllbGQ6Tm90aWZ5KHsKICAgICAgICAgICAgICAgIFRpdGxlID0gIkFrdGlmIiwKICAgICAgICAgICAgICAgIENvbnRlbnQgPSAiS2FyYWt0ZXIgbXV0ZXIga2F5YWsgS2FtdSEiLAogICAgICAgICAgICAgICAgRHVyYXRpb24gPSAzCiAgICAgICAgICAgIH0pCgogICAgICAgICAgICB0YXNrLnNwYXduKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGxvY2FsIGFuZ2xlID0gMAogICAgICAgICAgICAgICAgd2hpbGUgc3BpbkFjdGl2ZSBkbwogICAgICAgICAgICAgICAgICAgIGxvY2FsIGhycCA9IExvY2FsUGxheWVyLkNoYXJhY3RlciBhbmQgTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikKICAgICAgICAgICAgICAgICAgICBpZiBocnAgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBhbmdsZSA9IGFuZ2xlICsgNTAgLS0ga2VjZXBhdGFuIG11dGVyCiAgICAgICAgICAgICAgICAgICAgICAgIGhycC5DRnJhbWUgPSBDRnJhbWUubmV3KGhycC5Qb3NpdGlvbikgKiBDRnJhbWUuQW5nbGVzKDAsIG1hdGgucmFkKGFuZ2xlKSwgMCkKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoMC4wMSkgLS0gc2VtYWtpbiBrZWNpbCBkZWxheSwgc2VtYWtpbiBjZXBhdAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCkKICAgICAgICBlbHNlCiAgICAgICAgICAgIFJheWZpZWxkOk5vdGlmeSh7CiAgICAgICAgICAgICAgICBUaXRsZSA9ICJOb25ha3RpZiIsCiAgICAgICAgICAgICAgICBDb250ZW50ID0gIkJlcnB1dGFyIGJlcmhlbnRpLiIsCiAgICAgICAgICAgICAgICBEdXJhdGlvbiA9IDMKICAgICAgICAgICAgfSkKICAgICAgICBlbmQKICAgIGVuZCwKfSkKCmVsc2UKICAgIC0tIEthbGF1IEhXSUQgdGlkYWsgdGVyZGFmdGFyCiAgICBIV0lEVGFiOkNyZWF0ZVBhcmFncmFwaCh7CiAgICAgICAgVGl0bGUgPSAi4pqg77iPIEhXSUQgVGlkYWsgVGVyZGFmdGFyIiwKICAgICAgICBDb250ZW50ID0gIkhXSUQga2FtdSBiZWx1bSB0ZXJkYWZ0YXIuXG5cbiIgLi4gaHdpZAogICAgfSkKCiAgICBIV0lEVGFiOkNyZWF0ZUJ1dHRvbih7CiAgICAgICAgTmFtZSA9ICJTYWxpbiBIV0lEIiwKICAgICAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICAgICAgc2V0Y2xpcGJvYXJkKGh3aWQpCiAgICAgICAgICAgIFJheWZpZWxkOk5vdGlmeSh7CiAgICAgICAgICAgICAgICBUaXRsZSA9ICJEaXNhbGluIiwKICAgICAgICAgICAgICAgIENvbnRlbnQgPSAiSFdJRCBrYW11IHN1ZGFoIGRpc2FsaW4uIEtpcmltIGtlIG93bmVyIHVudHVrIGRpZGFmdGFya2FuLiIsCiAgICAgICAgICAgICAgICBEdXJhdGlvbiA9IDYKICAgICAgICAgICAgfSkKICAgICAgICBlbmQsCiAgICB9KQplbmQK
]]

-- decode + jalankan
local decoded = base64Decode(code)
loadstring(decoded)()
