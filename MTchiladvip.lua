-- Base64 decoder (biar bisa di executor seperti Delta tanpa HttpService)
local b='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'

local function base64Decode(data)
    data = string.gsub(data, '[^'..b..'=]', '')
    return (data:gsub('.', function(x)
        if (x == '=') then return '' end
        local r,f='',(b:find(x)-1)
        for i=6,1,-1 do r=r..(f%2^i - f%2^(i-1) > 0 and '1' or '0') end
        return r
    end):gsub('%d%d%d?%d?%d?%d?%d?%d?', function(x)
        if (#x ~= 8) then return '' end
        local c=0
        for i=1,8 do c=c + (x:sub(i,i)=='1' and 2^(8-i) or 0) end
        return string.char(c)
    end))
end

-- hasil Base64 dari script kamu
local code = [[bG9jYWwgUmF5ZmllbGQgPSBsb2Fkc3RyaW5nKGdhbWU6SHR0cEdldCgnaHR0cHM6Ly9zaXJpdXMubWVudS9yYXlmaWVsZCcpKSgpCgpsb2NhbCBXaW5kb3cgPSBSYXlmaWVsZDpDcmVhdGVXaW5kb3coewogICBOYW1lID0gIlZJUDogTVQgQ2hhbGlkIiwKICAgTG9hZGluZ1RpdGxlID0gIlNlZGFuZyBMb2FkaW5nIiwKICAgTG9hZGluZ1N1YnRpdGxlID0gIkJ5IEFjb25nIEdhY29yIiwKfSkKCi0tIC8vIEFtYmlsIEhXSUQgZGFyaSBkZXZpY2UKbG9jYWwgUmJ4QW5hbHl0aWNzID0gZ2FtZTpHZXRTZXJ2aWNlKCJSYnhBbmFseXRpY3NTZXJ2aWNlIikKbG9jYWwgaHdpZCA9IFJieEFuYWx5dGljczpHZXRDbGllbnRJZCgpCgotLSAvLyBMb2FkIGRhdGFiYXNlIGRhcmkgR2l0SHViIChSQVcgZmlsZSkKLS0gZ2FudGkgdXNlcm5hbWUgJiByZXBvIHNlc3VhaSBwdW55YW11CmxvY2FsIHN1Y2Nlc3MsIEFsbG93ZWRIV0lEcyA9IHBjYWxsKGZ1bmN0aW9uKCkKICAgIHJldHVybiBsb2Fkc3RyaW5nKGdhbWU6SHR0cEdldCgiaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL25vbWFtb254L2d1bnVuZy9yZWZzL2hlYWRzL21haW4vaHdpZC5sdWEiKSkoKQplbmQpCgppZiBub3Qgc3VjY2VzcyBvciB0eXBlKEFsbG93ZWRIV0lEcykgfj0gInRhYmxlIiB0aGVuCiAgICBBbGxvd2VkSFdJRHMgPSB7fSAtLSBmYWxsYmFjayBiaWFyIGFtYW4KZW5kCgotLSAvLyBDZWsgYXBha2FoIEhXSUQgdGVyZGFmdGFyCmxvY2FsIGlzVklQID0gQWxsb3dlZEhXSURzW2h3aWRdID09IHRydWUKCgppZiBpc1ZJUCB0aGVuCiAgICAtLSBTZW11YSBUYWIgdGVyc2VkaWEga2FsYXUgVklQCiAKLS0gVGFiIEluZm9ybWFzaQotLSA9PT09PT09PT09PT09PT09PT09PT09PT0KbG9jYWwgSW5mb1RhYiA9IFdpbmRvdzpDcmVhdGVUYWIoIkluZm9ybWFzaSIsIDYwMzQ1MDk5OTQpCkluZm9UYWI6Q3JlYXRlU2VjdGlvbigiSW5mb3JtYXNpIikKCkluZm9UYWI6Q3JlYXRlUGFyYWdyYXBoKHsKICAgIFRpdGxlID0gIkphbW1va28gQmFjYSIsCiAgICBDb250ZW50ID0gIkluaSBhZGFsYWggc2NyaXB0IHRlbGVwb3J0IFlhbmcga3VidWF0IGFzYWwgYXNhbCBha3dva2Fvd2suIiwKfSkKSW5mb1RhYjpDcmVhdGVTZWN0aW9uKCJJbmZvIFRhbWJhaGFuIikKSW5mb1RhYjpDcmVhdGVQYXJhZ3JhcGgoewogICAgVGl0bGUgPSAiUEVOVElORyEhISIsCiAgICBDb250ZW50ID0gIkppa2EgTWF1IFRyb2xsIEphbGFuaSBlbW90ZSBsYWluIGR1bHUgZGFuIGphbGFua2FuIElrdXRpIFBsYXllcvCfmIEuIERhbiBGaXR1ciBDaGVjayBQcm8gKCBIYW55YSBUZXJiYWNhIERJIFNlcnZlciBKaWthIEhhc2lsIFB1bmNha255YSBBZGEgRGkgUGFwYW4gUGVyaW5na2F0ISEhICIsCn0pCgoKUmF5ZmllbGQ6Tm90aWZ5KHsKICAgVGl0bGUgPSAiU2NyaXB0IERpbXVhdCIsCiAgIENvbnRlbnQgPSAiVEVMQVNPIGJlcmhhc2lsISEhIiwKICAgRHVyYXRpb24gPSA2LjUsCiAgIEltYWdlID0gNDQ4MzM2MjQ1OCwKfSkKCgotLSA9PT09PT09PT09PT09PT09PT09PT09PT0KLS0gVGFiIFRlbGVwb3J0Ci0tID09PT09PT09PT09PT09PT09PT09PT09PQpsb2NhbCBUZWxlVGFiID0gV2luZG93OkNyZWF0ZVRhYigiVGVsZXBvcnQiLCA0NDgzMzYyNDU4KQoKbG9jYWwgdGVsZXBvcnRQb2ludHMgPSB7CiAgICBTcGF3biA9IENGcmFtZS5uZXcoLTQ2LCAxMCwgLTUpLCAgICAgLS0gU2VzdWFpa2FuIGtvb3JkaW5hdCBzcGF3biBkaSBnYW1lIGthbXUKICAgIENQMSA9IENGcmFtZS5uZXcoODIsIDExOCwgLTUzNSksCiAgICBDUDIgPSBDRnJhbWUubmV3KDU0NSwgNDUwLCA0OTgpLAogICAgQ1AzID0gQ0ZyYW1lLm5ldygtMjkwLCAzODEsIDQ1NyksCiAgICBDUDQgPSBDRnJhbWUubmV3KC0xMDA4LCA1NDYsIDEzNTgpLAogICAgQ1A1ID0gQ0ZyYW1lLm5ldygtMTc3OSwgODMwLCA4NzQpLAogICAgQ1A2ID0gQ0ZyYW1lLm5ldygtMTg5NywgOTE3LCAxNTQ3KSwKICAgIENQNyA9IENGcmFtZS5uZXcoLTIyNzAsIDk5NCwgMTgwMyksCiAgICBQdW5jYWsgPSBDRnJhbWUubmV3KC0zMDE3LCAxMjE4LCAxMTc3KSwKfQoKLS0gVG9tYm9sIG1hbnVhbCB0ZWxlcG9ydCB0ZXRhcCBhZGEgClRlbGVUYWI6Q3JlYXRlU2VjdGlvbigiVGVsZXBvcnQgTWFudWFsIikKVGVsZVRhYjpDcmVhdGVCdXR0b24oeyBOYW1lID0gIvCfmqkgU3Bhd24iLCBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgIGxvY2FsIGNoYXIgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyCiAgICBpZiBjaGFyIGFuZCBjaGFyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgdGhlbgogICAgICAgIGNoYXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgPSB0ZWxlcG9ydFBvaW50cy5TcGF3bgogICAgZW5kCmVuZCB9KQoKVGVsZVRhYjpDcmVhdGVCdXR0b24oeyBOYW1lID0gIvCfk40gVGVsZXBvcnQgQ1AgMSIsIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgbG9jYWwgY2hhciA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIKICAgIGlmIGNoYXIgYW5kIGNoYXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSB0aGVuCiAgICAgICAgY2hhci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IHRlbGVwb3J0UG9pbnRzLkNQMQogICAgZW5kCmVuZCB9KQoKVGVsZVRhYjpDcmVhdGVCdXR0b24oeyBOYW1lID0gIvCfk40gVGVsZXBvcnQgQ1AgMiIsIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgbG9jYWwgY2hhciA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIKICAgIGlmIGNoYXIgYW5kIGNoYXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSB0aGVuCiAgICAgICAgY2hhci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IHRlbGVwb3J0UG9pbnRzLkNQMgogICAgZW5kCmVuZCB9KQoKVGVsZVRhYjpDcmVhdGVCdXR0b24oeyBOYW1lID0gIvCfk40gVGVsZXBvcnQgQ1AgMyIsIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgbG9jYWwgY2hhciA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIKICAgIGlmIGNoYXIgYW5kIGNoYXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSB0aGVuCiAgICAgICAgY2hhci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IHRlbGVwb3J0UG9pbnRzLkNQMwogICAgZW5kCmVuZCB9KQoKVGVsZVRhYjpDcmVhdGVCdXR0b24oeyBOYW1lID0gIvCfk40gVGVsZXBvcnQgQ1AgNCIsIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgbG9jYWwgY2hhciA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIKICAgIGlmIGNoYXIgYW5kIGNoYXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSB0aGVuCiAgICAgICAgY2hhci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IHRlbGVwb3J0UG9pbnRzLkNQNAogICAgZW5kCmVuZCB9KQoKVGVsZVRhYjpDcmVhdGVCdXR0b24oeyBOYW1lID0gIvCfk40gVGVsZXBvcnQgQ1AgNSIsIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgbG9jYWwgY2hhciA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIKICAgIGlmIGNoYXIgYW5kIGNoYXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSB0aGVuCiAgICAgICAgY2hhci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IHRlbGVwb3J0UG9pbnRzLkNQNQogICAgZW5kCmVuZCB9KQoKVGVsZVRhYjpDcmVhdGVCdXR0b24oeyBOYW1lID0gIvCfk40gVGVsZXBvcnQgQ1AgNiIsIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgbG9jYWwgY2hhciA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIKICAgIGlmIGNoYXIgYW5kIGNoYXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSB0aGVuCiAgICAgICAgY2hhci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IHRlbGVwb3J0UG9pbnRzLkNQNgogICAgZW5kCmVuZCB9KQoKVGVsZVRhYjpDcmVhdGVCdXR0b24oeyBOYW1lID0gIvCfk40gVGVsZXBvcnQgQ1AgNyIsIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgbG9jYWwgY2hhciA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIKICAgIGlmIGNoYXIgYW5kIGNoYXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSB0aGVuCiAgICAgICAgY2hhci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IHRlbGVwb3J0UG9pbnRzLkNQNwogICAgZW5kCmVuZCB9KQoKClRlbGVUYWI6Q3JlYXRlQnV0dG9uKHsgTmFtZSA9ICLim7DvuI8gVGVsZXBvcnQgUHVuY2FrIiwgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICBsb2NhbCBjaGFyID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcgogICAgaWYgY2hhciBhbmQgY2hhcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIHRoZW4KICAgICAgICBjaGFyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gdGVsZXBvcnRQb2ludHMuUHVuY2FrCiAgICBlbmQKZW5kIH0pCgotLSBGaXR1ciBBdXRvIFRlbGVwb3J0IENQMSBzYW1wYWkgUHVuY2FrICsgUmVzcGF3biArIExvb3AKbG9jYWwgaXNBdXRvVGVsZXBvcnRpbmcgPSBmYWxzZQpsb2NhbCBhdXRvVGVsZXBvcnRUYXNrID0gbmlsCgpsb2NhbCBhdXRvVGVsZXBvcnRQb2ludHMgPSB7CiAgICB0ZWxlcG9ydFBvaW50cy5DUDEsCiAgICB0ZWxlcG9ydFBvaW50cy5DUDIsCiAgICB0ZWxlcG9ydFBvaW50cy5DUDMsCiAgICB0ZWxlcG9ydFBvaW50cy5DUDQsCiAgICB0ZWxlcG9ydFBvaW50cy5DUDUsCiAgICB0ZWxlcG9ydFBvaW50cy5DUDYsCiAgICB0ZWxlcG9ydFBvaW50cy5DUDcsCiAgICB0ZWxlcG9ydFBvaW50cy5QdW5jYWssCn0KCmxvY2FsIGZ1bmN0aW9uIHJlc3Bhd25DaGFyYWN0ZXIoKQogICAgbG9jYWwgcGxheWVyID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyCiAgICBpZiBwbGF5ZXIuQ2hhcmFjdGVyIHRoZW4KICAgICAgICBwbGF5ZXIuQ2hhcmFjdGVyOkJyZWFrSm9pbnRzKCkKICAgIGVuZAogICAgLS0gVHVuZ2d1IGthcmFrdGVyIHJlc3Bhd24KICAgIHJlcGVhdCB0YXNrLndhaXQoKSB1bnRpbCBwbGF5ZXIuQ2hhcmFjdGVyIGFuZCBwbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kIHBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQuSGVhbHRoID4gMAplbmQKCmxvY2FsIGZ1bmN0aW9uIGlzQXRTcGF3bihwb3MsIHRocmVzaG9sZCkKICAgIGxvY2FsIHNwYXduUG9zID0gdGVsZXBvcnRQb2ludHMuU3Bhd24uUG9zaXRpb24KICAgIHJldHVybiAocG9zIC0gc3Bhd25Qb3MpLk1hZ25pdHVkZSA8PSB0aHJlc2hvbGQKZW5kCgpUZWxlVGFiOkNyZWF0ZVNlY3Rpb24oIlRlbGVwb3J0IE90b21hdGlzIikKCi0tIFRvZ2dsZSBBdXRvIFRlbGVwb3J0ClRlbGVUYWI6Q3JlYXRlVG9nZ2xlKHsKICAgIE5hbWUgPSAi8J+PhiBBdXRvIFRlbGVwb3J0IiwKICAgIEN1cnJlbnRWYWx1ZSA9IGZhbHNlLAogICAgRmxhZyA9ICJBdXRvVGVsZXBvcnRUb2dnbGUiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbihWYWx1ZSkKICAgICAgICBsb2NhbCBwbGF5ZXIgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIKICAgICAgICBpc0F1dG9UZWxlcG9ydGluZyA9IFZhbHVlCgogICAgICAgIGlmIGlzQXV0b1RlbGVwb3J0aW5nIHRoZW4KICAgICAgICAgICAgLS0gU3RhcnQgQXV0byBUZWxlcG9ydAogICAgICAgICAgICBhdXRvVGVsZXBvcnRUYXNrID0gdGFzay5zcGF3bihmdW5jdGlvbigpCiAgICAgICAgICAgICAgICB3aGlsZSBpc0F1dG9UZWxlcG9ydGluZyBkbwogICAgICAgICAgICAgICAgICAgIGZvciBpLCBjZiBpbiBpcGFpcnMoYXV0b1RlbGVwb3J0UG9pbnRzKSBkbwogICAgICAgICAgICAgICAgICAgICAgICBpZiBub3QgaXNBdXRvVGVsZXBvcnRpbmcgdGhlbiBicmVhayBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgY2hhciA9IHBsYXllci5DaGFyYWN0ZXIKICAgICAgICAgICAgICAgICAgICAgICAgaWYgY2hhciBhbmQgY2hhcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgPSBjZgogICAgICAgICAgICAgICAgICAgICAgICAgICAgUmF5ZmllbGQ6Tm90aWZ5KHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUaXRsZSA9ICJBdXRvIFRlbGVwb3J0IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDb250ZW50ID0gIlRlbGVwb3J0IGtlIENQICIuLmksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRHVyYXRpb24gPSAyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdCgyKQogICAgICAgICAgICAgICAgICAgIGVuZAoKICAgICAgICAgICAgICAgICAgICBpZiBub3QgaXNBdXRvVGVsZXBvcnRpbmcgdGhlbiBicmVhayBlbmQKICAgICAgICAgICAgICAgICAgICBSYXlmaWVsZDpOb3RpZnkoewogICAgICAgICAgICAgICAgICAgICAgICBUaXRsZSA9ICJSZXNwYXduIiwKICAgICAgICAgICAgICAgICAgICAgICAgQ29udGVudCA9ICJSZXNwYXduIGthcmFrdGVyLi4uIiwKICAgICAgICAgICAgICAgICAgICAgICAgRHVyYXRpb24gPSAyLAogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgcmVzcGF3bkNoYXJhY3RlcigpCgogICAgICAgICAgICAgICAgICAgIC0tIFR1bmdndSBzYW1wYWkga2FyYWt0ZXIgYmVuYXItYmVuYXIgYmVyYWRhIGRpIHNwYXduCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgbWF4V2FpdFRpbWUgPSA2CiAgICAgICAgICAgICAgICAgICAgbG9jYWwgd2FpdGVkID0gMAogICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoMC41KQogICAgICAgICAgICAgICAgICAgICAgICB3YWl0ZWQgKz0gMC41CiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIGNoYXIgPSBwbGF5ZXIuQ2hhcmFjdGVyCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGNoYXIgYW5kIGNoYXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBpc0F0U3Bhd24oY2hhci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uLCAxMCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgdW50aWwgd2FpdGVkID49IG1heFdhaXRUaW1lCgogICAgICAgICAgICAgICAgICAgIFJheWZpZWxkOk5vdGlmeSh7CiAgICAgICAgICAgICAgICAgICAgICAgIFRpdGxlID0gIkxvb3AgVWxhbmciLAogICAgICAgICAgICAgICAgICAgICAgICBDb250ZW50ID0gIk11bGFpIGxhZ2kgZGFyaSBDUDEuLi4iLAogICAgICAgICAgICAgICAgICAgICAgICBEdXJhdGlvbiA9IDIsCiAgICAgICAgICAgICAgICAgICAgfSkKCiAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KDEuNSkKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpCiAgICAgICAgZWxzZQogICAgICAgICAgICAtLSBTdG9wIEF1dG8gVGVsZXBvcnQKICAgICAgICAgICAgaWYgYXV0b1RlbGVwb3J0VGFzayB0aGVuCiAgICAgICAgICAgICAgICB0YXNrLmNhbmNlbChhdXRvVGVsZXBvcnRUYXNrKQogICAgICAgICAgICAgICAgYXV0b1RlbGVwb3J0VGFzayA9IG5pbAogICAgICAgICAgICBlbmQKICAgICAgICAgICAgUmF5ZmllbGQ6Tm90aWZ5KHsKICAgICAgICAgICAgICAgIFRpdGxlID0gIkF1dG8gVGVsZXBvcnQiLAogICAgICAgICAgICAgICAgQ29udGVudCA9ICJBdXRvIHRlbGVwb3J0IGRpaGVudGlrYW4hIiwKICAgICAgICAgICAgICAgIER1cmF0aW9uID0gMywKICAgICAgICAgICAgfSkKICAgICAgICBlbmQKICAgIGVuZCwKfSkKCgoKLS0gRGV0ZWN0aW9uIFRhYgotLSA9PT09PT09PT09PT09PT09PT09PT09PT0KbG9jYWwgUGxheWVycyA9IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpCmxvY2FsIERldGVjdGlvblRhYiA9IFdpbmRvdzpDcmVhdGVUYWIoIkRldGVjdGlvbiIsIDQ0ODMzNjI0NTgpCkRldGVjdGlvblRhYjpDcmVhdGVTZWN0aW9uKCJEZXRla3NpIikKLS0gPT09PT09PT09PT09PT09PT09PT09PT09Ci0tIEhlbHBlciBGdW5jdGlvbnMKLS0gPT09PT09PT09PT09PT09PT09PT09PT09CmxvY2FsIGZ1bmN0aW9uIEdldFBsYXllclN1bW1pdChwbGF5ZXIpCiAgICBsb2NhbCBzdW1taXROdW1iZXIgPSBuaWwKICAgIGxvY2FsIGNoYXJhY3RlciA9IHBsYXllci5DaGFyYWN0ZXIKICAgIGlmIGNoYXJhY3RlciB0aGVuCiAgICAgICAgbG9jYWwgaGVhZCA9IGNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSGVhZCIpCiAgICAgICAgaWYgaGVhZCB0aGVuCiAgICAgICAgICAgIGZvciBfLCBndWkgaW4gaXBhaXJzKGhlYWQ6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgIGlmIGd1aTpJc0EoIkJpbGxib2FyZEd1aSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBmb3IgXywgbGFiZWwgaW4gaXBhaXJzKGd1aTpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICBpZiBsYWJlbDpJc0EoIlRleHRMYWJlbCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHN1bW1pdFRleHQgPSBzdHJpbmcubWF0Y2gobGFiZWwuVGV4dCwgIltTc111bW1pdFteJWRdKihbJWQsJS5dKykiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgc3VtbWl0VGV4dCB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VtbWl0VGV4dCA9IHN1bW1pdFRleHQ6Z3N1YigiWywlLl0iLCAiIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdW1taXROdW1iZXIgPSB0b251bWJlcihzdW1taXRUZXh0KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCiAgICBpZiBub3Qgc3VtbWl0TnVtYmVyIHRoZW4KICAgICAgICBsb2NhbCBzdGF0cyA9IHBsYXllcjpGaW5kRmlyc3RDaGlsZCgibGVhZGVyc3RhdHMiKQogICAgICAgIGlmIHN0YXRzIHRoZW4KICAgICAgICAgICAgbG9jYWwgc3VtbWl0U3RhdCA9IHN0YXRzOkZpbmRGaXJzdENoaWxkKCJTdW1taXQiKSBvciBzdGF0czpGaW5kRmlyc3RDaGlsZCgiU3VtbWl0cyIpCiAgICAgICAgICAgIGlmIHN1bW1pdFN0YXQgYW5kIHRvbnVtYmVyKHN1bW1pdFN0YXQuVmFsdWUpIHRoZW4KICAgICAgICAgICAgICAgIHN1bW1pdE51bWJlciA9IHRvbnVtYmVyKHN1bW1pdFN0YXQuVmFsdWUpCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCiAgICByZXR1cm4gc3VtbWl0TnVtYmVyIG9yIDAKZW5kCgpsb2NhbCBmdW5jdGlvbiBEZXRlY3RBZG1pbnMoKQogICAgbG9jYWwgYWRtaW5zID0ge30KICAgIGZvciBfLCBwbGF5ZXIgaW4gaXBhaXJzKFBsYXllcnM6R2V0UGxheWVycygpKSBkbwogICAgICAgIGxvY2FsIGNoYXJhY3RlciA9IHBsYXllci5DaGFyYWN0ZXIKICAgICAgICBpZiBjaGFyYWN0ZXIgdGhlbgogICAgICAgICAgICBsb2NhbCBoZWFkID0gY2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJIZWFkIikKICAgICAgICAgICAgaWYgaGVhZCB0aGVuCiAgICAgICAgICAgICAgICBmb3IgXywgZ3VpIGluIGlwYWlycyhoZWFkOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgaWYgZ3VpOklzQSgiQmlsbGJvYXJkR3VpIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBmb3IgXywgbGFiZWwgaW4gaXBhaXJzKGd1aTpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbGFiZWw6SXNBKCJUZXh0TGFiZWwiKSBhbmQgc3RyaW5nLmZpbmQoc3RyaW5nLnVwcGVyKGxhYmVsLlRleHQpLCAiQURNSU4iKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFibGUuaW5zZXJ0KGFkbWlucywgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBOYW1lID0gcGxheWVyLk5hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN1bW1pdCA9IEdldFBsYXllclN1bW1pdChwbGF5ZXIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCiAgICByZXR1cm4gYWRtaW5zCmVuZAoKbG9jYWwgZnVuY3Rpb24gRGV0ZWN0VG9wU3VtbWl0cyhsaW1pdCkKICAgIGxvY2FsIHJlc3VsdHMgPSB7fQogICAgZm9yIF8sIHBsYXllciBpbiBpcGFpcnMoUGxheWVyczpHZXRQbGF5ZXJzKCkpIGRvCiAgICAgICAgbG9jYWwgc3VtbWl0TnVtYmVyID0gR2V0UGxheWVyU3VtbWl0KHBsYXllcikKICAgICAgICBpZiBzdW1taXROdW1iZXIgdGhlbgogICAgICAgICAgICB0YWJsZS5pbnNlcnQocmVzdWx0cywge05hbWUgPSBwbGF5ZXIuTmFtZSwgU3VtbWl0ID0gc3VtbWl0TnVtYmVyfSkKICAgICAgICBlbmQKICAgIGVuZAogICAgdGFibGUuc29ydChyZXN1bHRzLCBmdW5jdGlvbihhLCBiKSByZXR1cm4gYS5TdW1taXQgPiBiLlN1bW1pdCBlbmQpCiAgICBsb2NhbCB0b3BOID0ge30KICAgIGZvciBpID0gMSwgbWF0aC5taW4obGltaXQsICNyZXN1bHRzKSBkbwogICAgICAgIHRhYmxlLmluc2VydCh0b3BOLCByZXN1bHRzW2ldKQogICAgZW5kCiAgICByZXR1cm4gdG9wTgplbmQKCi0tID09PT09PT09PT09PT09PT09PT09PT09PQotLSBBZG1pbiBEZXRlY3Rpb24KLS0gPT09PT09PT09PT09PT09PT09PT09PT09CmxvY2FsIEFkbWluTG9vcApsb2NhbCBBZG1pbkxhYmVsCgpEZXRlY3Rpb25UYWI6Q3JlYXRlVG9nZ2xlKHsKICAgIE5hbWUgPSAi8J+UjSBDaGVjayBBZG1pbnMiLAogICAgQ3VycmVudFZhbHVlID0gZmFsc2UsCiAgICBGbGFnID0gIkNoZWNrQWRtaW5zVG9nZ2xlIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oVmFsdWUpCiAgICAgICAgaWYgVmFsdWUgdGhlbgogICAgICAgICAgICBBZG1pbkxvb3AgPSB0YXNrLnNwYXduKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGxvY2FsIGxhc3RBZG1pbnMgPSAiIgogICAgICAgICAgICAgICAgd2hpbGUgdHJ1ZSBkbwogICAgICAgICAgICAgICAgICAgIGxvY2FsIGFkbWlucyA9IERldGVjdEFkbWlucygpCiAgICAgICAgICAgICAgICAgICAgaWYgI2FkbWlucyA+IDAgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBsYWJlbFRleHQgPSAiQWRtaW4gVGVyZGV0ZWtzaSAoIi4uI2FkbWlucy4uIik6IgogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBub3RpZnlUZXh0ID0gbGFiZWxUZXh0CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciBfLCBkYXRhIGluIGlwYWlycyhhZG1pbnMpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbFRleHQgPSBsYWJlbFRleHQgLi4gIlxuLSAiIC4uIGRhdGEuTmFtZSAuLiAiIChTdW1taXQ6ICIgLi4gZGF0YS5TdW1taXQgLi4gIikiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3RpZnlUZXh0ID0gbm90aWZ5VGV4dCAuLiAiXG4tICIgLi4gZGF0YS5OYW1lIC4uICIgKFN1bW1pdDogIiAuLiBkYXRhLlN1bW1pdCAuLiAiKSIKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIEFkbWluTGFiZWwgdGhlbiBBZG1pbkxhYmVsOlNldChsYWJlbFRleHQpIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBpZiBub3RpZnlUZXh0IH49IGxhc3RBZG1pbnMgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgUmF5ZmllbGQ6Tm90aWZ5KHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUaXRsZSA9ICJBZG1pbiBUZXJkZXRla3NpISIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ29udGVudCA9IG5vdGlmeVRleHQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRHVyYXRpb24gPSA3LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RBZG1pbnMgPSBub3RpZnlUZXh0CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgaWYgQWRtaW5MYWJlbCB0aGVuIEFkbWluTGFiZWw6U2V0KCJBZG1pbiBUZXJkZXRla3NpOiAtIikgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RBZG1pbnMgPSAiIgogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdCg1KQogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCkKICAgICAgICBlbHNlCiAgICAgICAgICAgIGlmIEFkbWluTG9vcCB0aGVuCiAgICAgICAgICAgICAgICB0YXNrLmNhbmNlbChBZG1pbkxvb3ApCiAgICAgICAgICAgICAgICBBZG1pbkxvb3AgPSBuaWwKICAgICAgICAgICAgICAgIGlmIEFkbWluTGFiZWwgdGhlbiBBZG1pbkxhYmVsOlNldCgiQWRtaW4gVGVyZGV0ZWtzaTogLSIpIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCwKfSkKCi0tID09PT09PT09PT09PT09PT09PT09PT09PQotLSBTdW1taXQgRGV0ZWN0aW9uCi0tID09PT09PT09PT09PT09PT09PT09PT09PQpsb2NhbCBTdW1taXRMb29wCmxvY2FsIFN1bW1pdExhYmVsCgpEZXRlY3Rpb25UYWI6Q3JlYXRlVG9nZ2xlKHsKICAgIE5hbWUgPSAi8J+UjSBDaGVjayBQcm8iLAogICAgQ3VycmVudFZhbHVlID0gZmFsc2UsCiAgICBGbGFnID0gIkNoZWNrU3VtbWl0VG9nZ2xlIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oVmFsdWUpCiAgICAgICAgaWYgVmFsdWUgdGhlbgogICAgICAgICAgICBTdW1taXRMb29wID0gdGFzay5zcGF3bihmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBsb2NhbCBsYXN0VG9wID0gIiIKICAgICAgICAgICAgICAgIHdoaWxlIHRydWUgZG8KICAgICAgICAgICAgICAgICAgICBsb2NhbCB0b3AzID0gRGV0ZWN0VG9wU3VtbWl0cygzKQogICAgICAgICAgICAgICAgICAgIGlmICN0b3AzID4gMCB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIGxhYmVsVGV4dCA9ICJUb3AgUHVuY2FrOiIKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgbm90aWZ5VGV4dCA9ICIiCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciBpLCBkYXRhIGluIGlwYWlycyh0b3AzKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWxUZXh0ID0gbGFiZWxUZXh0IC4uICJcbiIgLi4gaSAuLiAiKSAiIC4uIGRhdGEuTmFtZSAuLiAiICgiIC4uIGRhdGEuU3VtbWl0IC4uICIpIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgbm90aWZ5VGV4dCA9IG5vdGlmeVRleHQgLi4gIlxuIiAuLiBpIC4uICIpICIgLi4gZGF0YS5OYW1lIC4uICIgKCIgLi4gZGF0YS5TdW1taXQgLi4gIikiCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBpZiBTdW1taXRMYWJlbCB0aGVuIFN1bW1pdExhYmVsOlNldChsYWJlbFRleHQpIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBpZiBub3RpZnlUZXh0IH49IGxhc3RUb3AgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgUmF5ZmllbGQ6Tm90aWZ5KHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUaXRsZSA9ICJQdW5jYWsgVG9wIDMhIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDb250ZW50ID0gbm90aWZ5VGV4dCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEdXJhdGlvbiA9IDcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFzdFRvcCA9IG5vdGlmeVRleHQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICBpZiBTdW1taXRMYWJlbCB0aGVuIFN1bW1pdExhYmVsOlNldCgiVG9wIFB1bmNhazogLSIpIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBsYXN0VG9wID0gIiIKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoNSkKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpCiAgICAgICAgZWxzZQogICAgICAgICAgICBpZiBTdW1taXRMb29wIHRoZW4KICAgICAgICAgICAgICAgIHRhc2suY2FuY2VsKFN1bW1pdExvb3ApCiAgICAgICAgICAgICAgICBTdW1taXRMb29wID0gbmlsCiAgICAgICAgICAgICAgICBpZiBTdW1taXRMYWJlbCB0aGVuIFN1bW1pdExhYmVsOlNldCgiVG9wIFB1bmNhazogLSIpIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCwKfSkKCi0tID09PT09PT09PT09PT09PT09PT09PT09PQotLSBMYWJlbCBkaSBwYWxpbmcgYmF3YWgKLS0gPT09PT09PT09PT09PT09PT09PT09PT09CkFkbWluTGFiZWwgPSBEZXRlY3Rpb25UYWI6Q3JlYXRlTGFiZWwoIkFkbWluIFRlcmRldGVrc2k6IC0iKQpTdW1taXRMYWJlbCA9IERldGVjdGlvblRhYjpDcmVhdGVMYWJlbCgiVG9wIFB1bmNhazogLSIpCgpEZXRlY3Rpb25UYWI6Q3JlYXRlU2VjdGlvbigiRml0dXIgTGFpbm55YSIpCgotLSA9PT09PT09PT09PT09PT09PT09PT09PT0KLS0gQXV0byBMZWF2ZSBKaWthIEFkbWluCi0tID09PT09PT09PT09PT09PT09PT09PT09PQpsb2NhbCBBdXRvTGVhdmVMb29wCgpEZXRlY3Rpb25UYWI6Q3JlYXRlVG9nZ2xlKHsKICAgIE5hbWUgPSAi8J+aqiBBdXRvIExlYXZlIEppa2EgQWRtaW4iLAogICAgQ3VycmVudFZhbHVlID0gZmFsc2UsCiAgICBGbGFnID0gIkF1dG9MZWF2ZUFkbWluVG9nZ2xlIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oVmFsdWUpCiAgICAgICAgaWYgVmFsdWUgdGhlbgogICAgICAgICAgICBBdXRvTGVhdmVMb29wID0gdGFzay5zcGF3bihmdW5jdGlvbigpCiAgICAgICAgICAgICAgICB3aGlsZSB0cnVlIGRvCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgYWRtaW5zID0gRGV0ZWN0QWRtaW5zKCkKICAgICAgICAgICAgICAgICAgICBpZiAjYWRtaW5zID4gMCB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIC0tIE5vdGlmIGR1bHUgYmlhciBqZWxhcwogICAgICAgICAgICAgICAgICAgICAgICBSYXlmaWVsZDpOb3RpZnkoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgVGl0bGUgPSAiS2VsdWFyIFNlcnZlciEiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgQ29udGVudCA9ICJBZG1pbiB0ZXJkZXRla3NpLCBrZWx1YXIgb3RvbWF0aXMuLi4iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgRHVyYXRpb24gPSA1LAogICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoMSkKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyOktpY2soIkFkbWluIHRlcmRldGVrc2kgZGkgc2VydmVyLiBLYW11IG90b21hdGlzIGtlbHVhci4iKQogICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdCg1KQogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCkKICAgICAgICBlbHNlCiAgICAgICAgICAgIGlmIEF1dG9MZWF2ZUxvb3AgdGhlbgogICAgICAgICAgICAgICAgdGFzay5jYW5jZWwoQXV0b0xlYXZlTG9vcCkKICAgICAgICAgICAgICAgIEF1dG9MZWF2ZUxvb3AgPSBuaWwKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQsCn0pCmxvY2FsIEF1dG9Ob3RpZnlMb29wCgpEZXRlY3Rpb25UYWI6Q3JlYXRlVG9nZ2xlKHsKICAgIE5hbWUgPSAi8J+TpCBOb3RpZiBBZG1pbiBNYXN1ayIsCiAgICBDdXJyZW50VmFsdWUgPSBmYWxzZSwKICAgIEZsYWcgPSAiTm90aWZ5QWRtaW5Kb2luVG9nZ2xlIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oVmFsdWUpCiAgICAgICAgaWYgVmFsdWUgdGhlbgogICAgICAgICAgICAtLSBQYXNhbmcgbGlzdGVuZXIgUGxheWVyQWRkZWQKICAgICAgICAgICAgQXV0b05vdGlmeUxvb3AgPSBQbGF5ZXJzLlBsYXllckFkZGVkOkNvbm5lY3QoZnVuY3Rpb24ocGxheWVyKQogICAgICAgICAgICAgICAgcGxheWVyLkNoYXJhY3RlckFkZGVkOkNvbm5lY3QoZnVuY3Rpb24oY2hhcikKICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoMikKICAgICAgICAgICAgICAgICAgICBsb2NhbCBoZWFkID0gY2hhcjpGaW5kRmlyc3RDaGlsZCgiSGVhZCIpCiAgICAgICAgICAgICAgICAgICAgaWYgaGVhZCB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciBfLCBndWkgaW4gaXBhaXJzKGhlYWQ6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGd1aTpJc0EoIkJpbGxib2FyZEd1aSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgXywgbGFiZWwgaW4gaXBhaXJzKGd1aTpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBsYWJlbDpJc0EoIlRleHRMYWJlbCIpIGFuZCBzdHJpbmcuZmluZChzdHJpbmcudXBwZXIobGFiZWwuVGV4dCksICJBRE1JTiIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJheWZpZWxkOk5vdGlmeSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVGl0bGUgPSAi4pqg77iPIEFkbWluIE1hc3VrISIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ29udGVudCA9IHBsYXllci5OYW1lIC4uICIgYWRhbGFoIEFkbWluISIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRHVyYXRpb24gPSA4LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQpCiAgICAgICAgICAgIGVuZCkKICAgICAgICBlbHNlCiAgICAgICAgICAgIGlmIEF1dG9Ob3RpZnlMb29wIHRoZW4KICAgICAgICAgICAgICAgIEF1dG9Ob3RpZnlMb29wOkRpc2Nvbm5lY3QoKQogICAgICAgICAgICAgICAgQXV0b05vdGlmeUxvb3AgPSBuaWwKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQsCn0pCgoKLS0gPT09PT09PT09PT09PT09PT09PT09PT09Ci0tIFRhYiBQZW5nYXR1cmFuCi0tID09PT09PT09PT09PT09PT09PT09PT09PQpsb2NhbCBTZXR0aW5nc1RhYiA9IFdpbmRvdzpDcmVhdGVUYWIoIlNldHRpbmdzIiwgNjAzNDUwOTk5MykKCgpTZXR0aW5nc1RhYjpDcmVhdGVTZWN0aW9uKCJGaXR1ciBUYW1iYWhhbiIpCi0tID09PT09PT09PT09PT09PT09PT09PT09PQotLSBXYWxsaGFjayBOYW1hICsgSmFyYWsgKEF1dG8gVXBkYXRlKQotLSA9PT09PT09PT09PT09PT09PT09PT09PT0KbG9jYWwgUGxheWVycyA9IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpCmxvY2FsIExvY2FsUGxheWVyID0gUGxheWVycy5Mb2NhbFBsYXllcgpsb2NhbCBSdW5TZXJ2aWNlID0gZ2FtZTpHZXRTZXJ2aWNlKCJSdW5TZXJ2aWNlIikKCmxvY2FsIEVTUEVuYWJsZWQgPSBmYWxzZQpsb2NhbCBFU1BPYmplY3RzID0ge30KCmxvY2FsIGZ1bmN0aW9uIENyZWF0ZU5hbWVFU1AocGxheWVyKQogICAgaWYgRVNQT2JqZWN0c1twbGF5ZXJdIHRoZW4gcmV0dXJuIGVuZAoKICAgIGxvY2FsIGJpbGxib2FyZCA9IEluc3RhbmNlLm5ldygiQmlsbGJvYXJkR3VpIikKICAgIGJpbGxib2FyZC5OYW1lID0gIk5hbWVFU1AiCiAgICBiaWxsYm9hcmQuU2l6ZSA9IFVEaW0yLm5ldygwLCAxNTAsIDAsIDI1KQogICAgYmlsbGJvYXJkLkFsd2F5c09uVG9wID0gdHJ1ZQogICAgYmlsbGJvYXJkLlN0dWRzT2Zmc2V0ID0gVmVjdG9yMy5uZXcoMCwgMywgMCkKCiAgICBsb2NhbCBsYWJlbCA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIikKICAgIGxhYmVsLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMSwgMCkKICAgIGxhYmVsLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgICBsYWJlbC5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMCwgMjU1LCAwKQogICAgbGFiZWwuVGV4dFN0cm9rZVRyYW5zcGFyZW5jeSA9IDAuMgogICAgbGFiZWwuRm9udCA9IEVudW0uRm9udC5Tb3VyY2VTYW5zQm9sZAogICAgbGFiZWwuVGV4dFNpemUgPSAxNAogICAgbGFiZWwuVGV4dCA9IHBsYXllci5EaXNwbGF5TmFtZQogICAgbGFiZWwuUGFyZW50ID0gYmlsbGJvYXJkCgogICAgRVNQT2JqZWN0c1twbGF5ZXJdID0ge2JpbGxib2FyZCA9IGJpbGxib2FyZCwgbGFiZWwgPSBsYWJlbH0KZW5kCgpsb2NhbCBmdW5jdGlvbiBSZW1vdmVFU1AocGxheWVyKQogICAgaWYgRVNQT2JqZWN0c1twbGF5ZXJdIHRoZW4KICAgICAgICBpZiBFU1BPYmplY3RzW3BsYXllcl0uYmlsbGJvYXJkIHRoZW4KICAgICAgICAgICAgRVNQT2JqZWN0c1twbGF5ZXJdLmJpbGxib2FyZDpEZXN0cm95KCkKICAgICAgICBlbmQKICAgICAgICBFU1BPYmplY3RzW3BsYXllcl0gPSBuaWwKICAgIGVuZAplbmQKCmxvY2FsIGZ1bmN0aW9uIEF0dGFjaEJpbGxib2FyZChwbGF5ZXIsIGNoYXIpCiAgICBsb2NhbCBvYmogPSBFU1BPYmplY3RzW3BsYXllcl0KICAgIGlmIG9iaiBhbmQgY2hhciBhbmQgY2hhcjpGaW5kRmlyc3RDaGlsZCgiSGVhZCIpIHRoZW4KICAgICAgICBvYmouYmlsbGJvYXJkLkFkb3JuZWUgPSBjaGFyLkhlYWQKICAgICAgICBvYmouYmlsbGJvYXJkLlBhcmVudCA9IGNoYXIuSGVhZAogICAgZW5kCmVuZAoKLS0gTG9vcCB1dGFtYSB1cGRhdGUgamFyYWsgJiBwYXNhbmcgRVNQClJ1blNlcnZpY2UuUmVuZGVyU3RlcHBlZDpDb25uZWN0KGZ1bmN0aW9uKCkKICAgIGlmIG5vdCBFU1BFbmFibGVkIHRoZW4gcmV0dXJuIGVuZAogICAgbG9jYWwgbG9jYWxDaGFyID0gTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyCiAgICBsb2NhbCBsb2NhbEhSUCA9IGxvY2FsQ2hhciBhbmQgbG9jYWxDaGFyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikKCiAgICBmb3IgXywgcGxyIGluIGlwYWlycyhQbGF5ZXJzOkdldFBsYXllcnMoKSkgZG8KICAgICAgICBpZiBwbHIgfj0gTG9jYWxQbGF5ZXIgdGhlbgogICAgICAgICAgICAtLSBwYXN0aWthbiBzZWxhbHUgYWRhIEVTUAogICAgICAgICAgICBpZiBub3QgRVNQT2JqZWN0c1twbHJdIHRoZW4KICAgICAgICAgICAgICAgIENyZWF0ZU5hbWVFU1AocGxyKQogICAgICAgICAgICBlbmQKCiAgICAgICAgICAgIGxvY2FsIG9iaiA9IEVTUE9iamVjdHNbcGxyXQogICAgICAgICAgICBsb2NhbCBjaGFyID0gcGxyLkNoYXJhY3RlcgogICAgICAgICAgICBpZiBjaGFyIGFuZCBjaGFyOkZpbmRGaXJzdENoaWxkKCJIZWFkIikgdGhlbgogICAgICAgICAgICAgICAgLS0gcmUtYXR0YWNoIGthbGF1IHBlcmx1CiAgICAgICAgICAgICAgICBpZiBvYmouYmlsbGJvYXJkLlBhcmVudCB+PSBjaGFyLkhlYWQgdGhlbgogICAgICAgICAgICAgICAgICAgIEF0dGFjaEJpbGxib2FyZChwbHIsIGNoYXIpCiAgICAgICAgICAgICAgICBlbmQKCiAgICAgICAgICAgICAgICAtLSB1cGRhdGUgamFyYWsgcmVhbHRpbWUKICAgICAgICAgICAgICAgIGxvY2FsIGhycCA9IGNoYXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKQogICAgICAgICAgICAgICAgaWYgbG9jYWxIUlAgYW5kIGhycCB0aGVuCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgZGlzdCA9IChocnAuUG9zaXRpb24gLSBsb2NhbEhSUC5Qb3NpdGlvbikuTWFnbml0dWRlCiAgICAgICAgICAgICAgICAgICAgb2JqLmxhYmVsLlRleHQgPSBwbHIuRGlzcGxheU5hbWUgLi4gIiBbIiAuLiBtYXRoLmZsb29yKGRpc3QpIC4uICJtXSIKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICBvYmoubGFiZWwuVGV4dCA9IHBsci5EaXNwbGF5TmFtZSAuLiAiIFtOL0FdIgogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCmVuZCkKCi0tIFRvZ2dsZSBFU1AKbG9jYWwgZnVuY3Rpb24gVG9nZ2xlRVNQKHN0YXRlKQogICAgRVNQRW5hYmxlZCA9IHN0YXRlCiAgICBpZiBub3QgRVNQRW5hYmxlZCB0aGVuCiAgICAgICAgZm9yIF8sIG9iaiBpbiBwYWlycyhFU1BPYmplY3RzKSBkbwogICAgICAgICAgICBpZiBvYmouYmlsbGJvYXJkIHRoZW4gb2JqLmJpbGxib2FyZDpEZXN0cm95KCkgZW5kCiAgICAgICAgZW5kCiAgICAgICAgRVNQT2JqZWN0cyA9IHt9CiAgICBlbmQKZW5kCgotLSBUb2dnbGUgZGkgU2V0dGluZ3NUYWIKU2V0dGluZ3NUYWI6Q3JlYXRlVG9nZ2xlKHsKICAgIE5hbWUgPSAiV2FsbGhhY2siLAogICAgQ3VycmVudFZhbHVlID0gZmFsc2UsCiAgICBGbGFnID0gIkVTUE5hbWVEaXN0YW5jZSIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKFZhbHVlKQogICAgICAgIFRvZ2dsZUVTUChWYWx1ZSkKICAgIGVuZCwKfSkKCiAKLS0gPT09PT09PT09PT09PT09PT09PT09PT09PQotLSBUQUIgUEVOR0FUVVJBTiAoTGVuZ2thcCkKLS0gPT09PT09PT09PT09PT09PT09PT09PT09PQpsb2NhbCBQbGF5ZXJzID0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikKbG9jYWwgVXNlcklucHV0U2VydmljZSA9IGdhbWU6R2V0U2VydmljZSgiVXNlcklucHV0U2VydmljZSIpCmxvY2FsIExvY2FsUGxheWVyID0gUGxheWVycy5Mb2NhbFBsYXllcgoKLS0gPT09PT09PT09PT09PT09PT09PT09PT09PQotLSBERUZBVUxUICYgU1RBVEUKLS0gPT09PT09PT09PT09PT09PT09PT09PT09PQpsb2NhbCBkZWZhdWx0V2Fsa1NwZWVkID0gMTYKbG9jYWwgd2Fsa1NwZWVkRW5hYmxlZCA9IGZhbHNlIC0tIGRlZmF1bHQgT0ZGCmxvY2FsIGluZmluaXR5SnVtcEVuYWJsZWQgPSBmYWxzZQpsb2NhbCBjdXJyZW50V2Fsa1NwZWVkVmFsdWUgPSAxNiAtLSBzaW5rcm9uIGRlbmdhbiBzbGlkZXIKCi0tIGNhY2hlIGNvbm5lY3Rpb25zIHN1cGF5YSBiaXNhIGRpa2Vsb2xhCmxvY2FsIF9pakp1bXBSZXFDb25uLCBfaWpJbnB1dEJlZ2FuQ29ubgoKLS0gaGVscGVyOiBhbWJpbCBIdW1hbm9pZCBhbWFuCmxvY2FsIGZ1bmN0aW9uIGdldEh1bWFub2lkKCkKICAgIGxvY2FsIGNoYXIgPSBMb2NhbFBsYXllci5DaGFyYWN0ZXIgb3IgTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyQWRkZWQ6V2FpdCgpCiAgICByZXR1cm4gY2hhcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoIkh1bWFub2lkIikKZW5kCgotLSBoZWxwZXI6IGFwcGx5IFdhbGtTcGVlZCBzZXN1YWkgdG9nZ2xlICYgc2xpZGVyCmxvY2FsIGZ1bmN0aW9uIGFwcGx5V2Fsa1NwZWVkKCkKICAgIGxvY2FsIGh1bSA9IGdldEh1bWFub2lkKCkKICAgIGlmIG5vdCBodW0gdGhlbiByZXR1cm4gZW5kCiAgICBpZiB3YWxrU3BlZWRFbmFibGVkIHRoZW4KICAgICAgICBodW0uV2Fsa1NwZWVkID0gY3VycmVudFdhbGtTcGVlZFZhbHVlCiAgICBlbHNlCiAgICAgICAgaHVtLldhbGtTcGVlZCA9IGRlZmF1bHRXYWxrU3BlZWQKICAgIGVuZAplbmQKCi0tID09PT09PT09PT09PT09PT09PT09PT09PT0KLS0gVUkgU0VDVElPTgotLSA9PT09PT09PT09PT09PT09PT09PT09PT09ClNldHRpbmdzVGFiOkNyZWF0ZVNlY3Rpb24oIlBlbmdhdHVyYW4iKQoKLS0gV2Fsa1NwZWVkIFNsaWRlcgpsb2NhbCBXYWxrU3BlZWRTbGlkZXIgPSBTZXR0aW5nc1RhYjpDcmVhdGVTbGlkZXIoewogICAgTmFtZSA9ICJXYWxrU3BlZWQiLAogICAgUmFuZ2UgPSB7MTYsIDIwMH0sCiAgICBJbmNyZW1lbnQgPSA1LAogICAgU3VmZml4ID0gIlNwZWVkIiwKICAgIEN1cnJlbnRWYWx1ZSA9IGRlZmF1bHRXYWxrU3BlZWQsCiAgICBGbGFnID0gIldhbGtTcGVlZFNsaWRlciIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKFZhbHVlKQogICAgICAgIGN1cnJlbnRXYWxrU3BlZWRWYWx1ZSA9IFZhbHVlCiAgICAgICAgaWYgd2Fsa1NwZWVkRW5hYmxlZCB0aGVuCiAgICAgICAgICAgIGFwcGx5V2Fsa1NwZWVkKCkKICAgICAgICBlbmQKICAgIGVuZCwKfSkKCi0tIFdhbGtTcGVlZCBUb2dnbGUKbG9jYWwgV2Fsa1NwZWVkVG9nZ2xlID0gU2V0dGluZ3NUYWI6Q3JlYXRlVG9nZ2xlKHsKICAgIE5hbWUgPSAiV2Fsa1NwZWVkIE9uL09mZiIsCiAgICBDdXJyZW50VmFsdWUgPSB3YWxrU3BlZWRFbmFibGVkLCAtLSBkZWZhdWx0IGZhbHNlCiAgICBGbGFnID0gIldhbGtTcGVlZFRvZ2dsZSIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKFZhbHVlKQogICAgICAgIHdhbGtTcGVlZEVuYWJsZWQgPSBWYWx1ZQogICAgICAgIGFwcGx5V2Fsa1NwZWVkKCkKICAgIGVuZCwKfSkKCi0tIFJlLWFwcGx5IHNhYXQgcmVzcGF3bgpMb2NhbFBsYXllci5DaGFyYWN0ZXJBZGRlZDpDb25uZWN0KGZ1bmN0aW9uKGNoYXIpCiAgICBjaGFyOldhaXRGb3JDaGlsZCgiSHVtYW5vaWQiKQogICAgdGFzay5kZWZlcihhcHBseVdhbGtTcGVlZCkKZW5kKQoKLS0gU2VkaWtpdCDigJxwZW5qYWdh4oCdIGthbGF1IGdhbWUgbWVuY29iYSBnYW50aSBXYWxrU3BlZWQKdGFzay5zcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB0cnVlIGRvCiAgICAgICAgdGFzay53YWl0KDAuMjUpCiAgICAgICAgaWYgd2Fsa1NwZWVkRW5hYmxlZCB0aGVuCiAgICAgICAgICAgIGxvY2FsIGh1bSA9IGdldEh1bWFub2lkKCkKICAgICAgICAgICAgaWYgaHVtIGFuZCBodW0uV2Fsa1NwZWVkIH49IGN1cnJlbnRXYWxrU3BlZWRWYWx1ZSB0aGVuCiAgICAgICAgICAgICAgICBodW0uV2Fsa1NwZWVkID0gY3VycmVudFdhbGtTcGVlZFZhbHVlCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCmVuZCkKCi0tID09PT09PT09PT09PT09PT09PT09PT09PT0KLS0gSU5GSU5JVFkgSlVNUAotLSA9PT09PT09PT09PT09PT09PT09PT09PT09CmxvY2FsIGZ1bmN0aW9uIGZvcmNlSnVtcCgpCiAgICBsb2NhbCBodW0gPSBnZXRIdW1hbm9pZCgpCiAgICBpZiBub3QgaHVtIHRoZW4gcmV0dXJuIGVuZAogICAgbG9jYWwgcm9vdCA9IGh1bS5QYXJlbnQgYW5kIGh1bS5QYXJlbnQ6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKQoKICAgIC0tIDEpIHN0YW5kYXJkIGp1bXAgZmxhZwogICAgaHVtLkp1bXAgPSB0cnVlCgogICAgLS0gMikgcGFrc2Egc3RhdGUga2UgSnVtcGluZwogICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgIGh1bTpDaGFuZ2VTdGF0ZShFbnVtLkh1bWFub2lkU3RhdGVUeXBlLkp1bXBpbmcpCiAgICBlbmQpCgogICAgLS0gMykgZmFsbGJhY2s6IGRvcm9uZyBrZSBhdGFzCiAgICBpZiByb290IHRoZW4KICAgICAgICBsb2NhbCB2ID0gcm9vdC5Bc3NlbWJseUxpbmVhclZlbG9jaXR5CiAgICAgICAgbG9jYWwga2lja1kgPSA1MAogICAgICAgIHJvb3QuQXNzZW1ibHlMaW5lYXJWZWxvY2l0eSA9IFZlY3RvcjMubmV3KHYuWCwgbWF0aC5tYXgodi5ZLCBraWNrWSksIHYuWikKICAgIGVuZAplbmQKCi0tIGFrdGlma2FuIGxpc3RlbmVyIEluZmluaXR5IEp1bXAKbG9jYWwgZnVuY3Rpb24gYmluZEluZmluaXR5SnVtcENvbm5lY3Rpb25zKCkKICAgIC0tIGJlcnNpaGthbiBrb25la3NpIGxhbWEKICAgIGlmIF9pakp1bXBSZXFDb25uIHRoZW4gX2lqSnVtcFJlcUNvbm46RGlzY29ubmVjdCgpIGVuZAogICAgaWYgX2lqSW5wdXRCZWdhbkNvbm4gdGhlbiBfaWpJbnB1dEJlZ2FuQ29ubjpEaXNjb25uZWN0KCkgZW5kCgogICAgLS0gRXZlbnQgdW5pdmVyc2FsIGp1bXAKICAgIF9pakp1bXBSZXFDb25uID0gVXNlcklucHV0U2VydmljZS5KdW1wUmVxdWVzdDpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICBpZiBpbmZpbml0eUp1bXBFbmFibGVkIHRoZW4KICAgICAgICAgICAgZm9yY2VKdW1wKCkKICAgICAgICBlbmQKICAgIGVuZCkKCiAgICAtLSBUYW1iYWhhbiB1bnR1ayBTcGFjZSAvIEdhbWVwYWQgQQogICAgX2lqSW5wdXRCZWdhbkNvbm4gPSBVc2VySW5wdXRTZXJ2aWNlLklucHV0QmVnYW46Q29ubmVjdChmdW5jdGlvbihpbnB1dCwgZ3BlKQogICAgICAgIGlmIGdwZSB0aGVuIHJldHVybiBlbmQKICAgICAgICBpZiBub3QgaW5maW5pdHlKdW1wRW5hYmxlZCB0aGVuIHJldHVybiBlbmQKCiAgICAgICAgbG9jYWwga2MgPSBpbnB1dC5LZXlDb2RlCiAgICAgICAgaWYga2MgPT0gRW51bS5LZXlDb2RlLlNwYWNlIG9yIGtjID09IEVudW0uS2V5Q29kZS5CdXR0b25BIHRoZW4KICAgICAgICAgICAgZm9yY2VKdW1wKCkKICAgICAgICBlbmQKICAgIGVuZCkKZW5kCgotLSBUb2dnbGUgSW5maW5pdHkgSnVtcApTZXR0aW5nc1RhYjpDcmVhdGVUb2dnbGUoewogICAgTmFtZSA9ICJJbmZpbml0eSBKdW1wIiwKICAgIEN1cnJlbnRWYWx1ZSA9IGZhbHNlLAogICAgRmxhZyA9ICJJbmZpbml0eUp1bXBUb2dnbGUiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbihWYWx1ZSkKICAgICAgICBpbmZpbml0eUp1bXBFbmFibGVkID0gVmFsdWUKICAgICAgICBpZiBub3QgX2lqSnVtcFJlcUNvbm4gb3Igbm90IF9paklucHV0QmVnYW5Db25uIHRoZW4KICAgICAgICAgICAgYmluZEluZmluaXR5SnVtcENvbm5lY3Rpb25zKCkKICAgICAgICBlbmQKICAgIGVuZCwKfSkKCi0tIHBhc3Rpa2FuIGtvbmVrc2kgdGVyLWJpbmQgc2FhdCBzY3JpcHQgbG9hZApiaW5kSW5maW5pdHlKdW1wQ29ubmVjdGlvbnMoKQoKClNldHRpbmdzVGFiOkNyZWF0ZVNlY3Rpb24oIkZpdHVyIEZseSAoQmV0YSkiKQotLSA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQotLSBGbHkgVW5pdmVyc2FsIFN0YWJsZSAoUEMgJiBNb2JpbGUpCi0tID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Cgpsb2NhbCBQbGF5ZXJzID0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikKbG9jYWwgVXNlcklucHV0U2VydmljZSA9IGdhbWU6R2V0U2VydmljZSgiVXNlcklucHV0U2VydmljZSIpCmxvY2FsIFJ1blNlcnZpY2UgPSBnYW1lOkdldFNlcnZpY2UoIlJ1blNlcnZpY2UiKQpsb2NhbCBMb2NhbFBsYXllciA9IFBsYXllcnMuTG9jYWxQbGF5ZXIKCmxvY2FsIGZseWluZyA9IGZhbHNlCmxvY2FsIGZseVNwZWVkID0gNTAKbG9jYWwgZmx5QlYsIGZseUd5cm8KbG9jYWwgZmx5Q29ubgoKLS0gVUkgKE1vYmlsZSBCdXR0b25zKQpsb2NhbCBTY3JlZW5HdWkgPSBJbnN0YW5jZS5uZXcoIlNjcmVlbkd1aSIpClNjcmVlbkd1aS5OYW1lID0gIkZseU1vYmlsZVVJIgpTY3JlZW5HdWkuUmVzZXRPblNwYXduID0gZmFsc2UKU2NyZWVuR3VpLlBhcmVudCA9IGdhbWU6R2V0U2VydmljZSgiQ29yZUd1aSIpCgpsb2NhbCBVcEJ1dHRvbiA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpClVwQnV0dG9uLlNpemUgPSBVRGltMi5uZXcoMCwgMTAwLCAwLCA1MCkKVXBCdXR0b24uUG9zaXRpb24gPSBVRGltMi5uZXcoMC44MiwgMCwgMC42NSwgMCkKVXBCdXR0b24uVGV4dCA9ICLirIYgTmFpayIKVXBCdXR0b24uQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDAsIDE3MCwgMjU1KQpVcEJ1dHRvbi5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LDI1NSwyNTUpClVwQnV0dG9uLlRleHRTY2FsZWQgPSB0cnVlClVwQnV0dG9uLlBhcmVudCA9IFNjcmVlbkd1aQpVcEJ1dHRvbi5WaXNpYmxlID0gZmFsc2UKCmxvY2FsIERvd25CdXR0b24gPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQpEb3duQnV0dG9uLlNpemUgPSBVRGltMi5uZXcoMCwgMTAwLCAwLCA1MCkKRG93bkJ1dHRvbi5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLjgyLCAwLCAwLjc1LCAwKQpEb3duQnV0dG9uLlRleHQgPSAi4qyHIFR1cnVuIgpEb3duQnV0dG9uLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigwLCAxNzAsIDI1NSkKRG93bkJ1dHRvbi5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LDI1NSwyNTUpCkRvd25CdXR0b24uVGV4dFNjYWxlZCA9IHRydWUKRG93bkJ1dHRvbi5QYXJlbnQgPSBTY3JlZW5HdWkKRG93bkJ1dHRvbi5WaXNpYmxlID0gZmFsc2UKCi0tIEluZm8gUEMKbG9jYWwgSW5mb0xhYmVsID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiKQpJbmZvTGFiZWwuU2l6ZSA9IFVEaW0yLm5ldygwLCAyNjAsIDAsIDcwKQpJbmZvTGFiZWwuUG9zaXRpb24gPSBVRGltMi5uZXcoMC43LCAwLCAwLjA1LCAwKQpJbmZvTGFiZWwuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDAuMwpJbmZvTGFiZWwuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDAsMCwwKQpJbmZvTGFiZWwuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwyNTUsMjU1KQpJbmZvTGFiZWwuRm9udCA9IEVudW0uRm9udC5Tb3VyY2VTYW5zQm9sZApJbmZvTGFiZWwuVGV4dFNpemUgPSAxOApJbmZvTGFiZWwuVmlzaWJsZSA9IGZhbHNlCkluZm9MYWJlbC5UZXh0ID0gIkZseSBDb250cm9sczpcbldBU0QgPSBHZXJha1xuU3BhY2UgPSBOYWlrXG5TaGlmdCA9IFR1cnVuIgpJbmZvTGFiZWwuUGFyZW50ID0gU2NyZWVuR3VpCgpsb2NhbCB1cFByZXNzZWQsIGRvd25QcmVzc2VkID0gZmFsc2UsIGZhbHNlClVwQnV0dG9uLk1vdXNlQnV0dG9uMURvd246Q29ubmVjdChmdW5jdGlvbigpIHVwUHJlc3NlZCA9IHRydWUgZW5kKQpVcEJ1dHRvbi5Nb3VzZUJ1dHRvbjFVcDpDb25uZWN0KGZ1bmN0aW9uKCkgdXBQcmVzc2VkID0gZmFsc2UgZW5kKQpEb3duQnV0dG9uLk1vdXNlQnV0dG9uMURvd246Q29ubmVjdChmdW5jdGlvbigpIGRvd25QcmVzc2VkID0gdHJ1ZSBlbmQpCkRvd25CdXR0b24uTW91c2VCdXR0b24xVXA6Q29ubmVjdChmdW5jdGlvbigpIGRvd25QcmVzc2VkID0gZmFsc2UgZW5kKQoKLS0gU3RhcnQgRmx5CmxvY2FsIGZ1bmN0aW9uIHN0YXJ0Rmx5KCkKICAgIGlmIGZseWluZyB0aGVuIHJldHVybiBlbmQKICAgIGxvY2FsIGNoYXIgPSBMb2NhbFBsYXllci5DaGFyYWN0ZXIKICAgIGlmIG5vdCBjaGFyIHRoZW4gcmV0dXJuIGVuZAogICAgbG9jYWwgaHJwID0gY2hhcjpXYWl0Rm9yQ2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKQoKICAgIGZseWluZyA9IHRydWUKCiAgICAtLSBCb2R5VmVsb2NpdHkgdW50dWsgZG9yb25nIGthcmFrdGVyCiAgICBmbHlCViA9IEluc3RhbmNlLm5ldygiQm9keVZlbG9jaXR5IikKICAgIGZseUJWLk1heEZvcmNlID0gVmVjdG9yMy5uZXcoMWU1LCAxZTUsIDFlNSkKICAgIGZseUJWLlZlbG9jaXR5ID0gVmVjdG9yMy5uZXcoMCwwLDApCiAgICBmbHlCVi5QYXJlbnQgPSBocnAKCiAgICAtLSBCb2R5R3lybyBiaWFyIG5naWt1dCBhcmFoIGthbWVyYQogICAgZmx5R3lybyA9IEluc3RhbmNlLm5ldygiQm9keUd5cm8iKQogICAgZmx5R3lyby5NYXhUb3JxdWUgPSBWZWN0b3IzLm5ldygxZTUsIDFlNSwgMWU1KQogICAgZmx5R3lyby5DRnJhbWUgPSBocnAuQ0ZyYW1lCiAgICBmbHlHeXJvLlBhcmVudCA9IGhycAoKICAgIGlmIFVzZXJJbnB1dFNlcnZpY2UuVG91Y2hFbmFibGVkIHRoZW4KICAgICAgICBVcEJ1dHRvbi5WaXNpYmxlID0gdHJ1ZQogICAgICAgIERvd25CdXR0b24uVmlzaWJsZSA9IHRydWUKICAgIGVsc2VpZiBVc2VySW5wdXRTZXJ2aWNlLktleWJvYXJkRW5hYmxlZCB0aGVuCiAgICAgICAgSW5mb0xhYmVsLlZpc2libGUgPSB0cnVlCiAgICBlbmQKCiAgICBmbHlDb25uID0gUnVuU2VydmljZS5SZW5kZXJTdGVwcGVkOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgIGlmIG5vdCBmbHlpbmcgdGhlbiByZXR1cm4gZW5kCiAgICAgICAgbG9jYWwgY2FtQ0YgPSB3b3Jrc3BhY2UuQ3VycmVudENhbWVyYS5DRnJhbWUKICAgICAgICBsb2NhbCBtb3ZlRGlyID0gVmVjdG9yMy5uZXcoKQoKICAgICAgICAtLSBQQwogICAgICAgIGlmIFVzZXJJbnB1dFNlcnZpY2UuS2V5Ym9hcmRFbmFibGVkIHRoZW4KICAgICAgICAgICAgaWYgVXNlcklucHV0U2VydmljZTpJc0tleURvd24oRW51bS5LZXlDb2RlLlcpIHRoZW4KICAgICAgICAgICAgICAgIG1vdmVEaXIgKz0gY2FtQ0YuTG9va1ZlY3RvcgogICAgICAgICAgICBlbmQKICAgICAgICAgICAgaWYgVXNlcklucHV0U2VydmljZTpJc0tleURvd24oRW51bS5LZXlDb2RlLlMpIHRoZW4KICAgICAgICAgICAgICAgIG1vdmVEaXIgLT0gY2FtQ0YuTG9va1ZlY3RvcgogICAgICAgICAgICBlbmQKICAgICAgICAgICAgaWYgVXNlcklucHV0U2VydmljZTpJc0tleURvd24oRW51bS5LZXlDb2RlLkEpIHRoZW4KICAgICAgICAgICAgICAgIG1vdmVEaXIgLT0gY2FtQ0YuUmlnaHRWZWN0b3IKICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGlmIFVzZXJJbnB1dFNlcnZpY2U6SXNLZXlEb3duKEVudW0uS2V5Q29kZS5EKSB0aGVuCiAgICAgICAgICAgICAgICBtb3ZlRGlyICs9IGNhbUNGLlJpZ2h0VmVjdG9yCiAgICAgICAgICAgIGVuZAogICAgICAgICAgICBpZiBVc2VySW5wdXRTZXJ2aWNlOklzS2V5RG93bihFbnVtLktleUNvZGUuU3BhY2UpIHRoZW4KICAgICAgICAgICAgICAgIG1vdmVEaXIgKz0gVmVjdG9yMy5uZXcoMCwxLDApCiAgICAgICAgICAgIGVuZAogICAgICAgICAgICBpZiBVc2VySW5wdXRTZXJ2aWNlOklzS2V5RG93bihFbnVtLktleUNvZGUuTGVmdFNoaWZ0KSB0aGVuCiAgICAgICAgICAgICAgICBtb3ZlRGlyIC09IFZlY3RvcjMubmV3KDAsMSwwKQogICAgICAgICAgICBlbmQKICAgICAgICBlbHNlaWYgVXNlcklucHV0U2VydmljZS5Ub3VjaEVuYWJsZWQgdGhlbgogICAgICAgICAgICBsb2NhbCBodW0gPSBjaGFyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygiSHVtYW5vaWQiKQogICAgICAgICAgICBpZiBodW0gdGhlbgogICAgICAgICAgICAgICAgbW92ZURpciArPSBodW0uTW92ZURpcmVjdGlvbgogICAgICAgICAgICBlbmQKICAgICAgICAgICAgaWYgdXBQcmVzc2VkIHRoZW4KICAgICAgICAgICAgICAgIG1vdmVEaXIgKz0gVmVjdG9yMy5uZXcoMCwxLDApCiAgICAgICAgICAgIGVuZAogICAgICAgICAgICBpZiBkb3duUHJlc3NlZCB0aGVuCiAgICAgICAgICAgICAgICBtb3ZlRGlyIC09IFZlY3RvcjMubmV3KDAsMSwwKQogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKCiAgICAgICAgZmx5R3lyby5DRnJhbWUgPSBjYW1DRgogICAgICAgIGlmIG1vdmVEaXIuTWFnbml0dWRlID4gMCB0aGVuCiAgICAgICAgICAgIGZseUJWLlZlbG9jaXR5ID0gbW92ZURpci5Vbml0ICogZmx5U3BlZWQKICAgICAgICBlbHNlCiAgICAgICAgICAgIGZseUJWLlZlbG9jaXR5ID0gVmVjdG9yMy5uZXcoMCwwLDApCiAgICAgICAgZW5kCiAgICBlbmQpCmVuZAoKLS0gU3RvcCBGbHkKbG9jYWwgZnVuY3Rpb24gc3RvcEZseSgpCiAgICBmbHlpbmcgPSBmYWxzZQogICAgaWYgZmx5Q29ubiB0aGVuIGZseUNvbm46RGlzY29ubmVjdCgpIGZseUNvbm4gPSBuaWwgZW5kCiAgICBpZiBmbHlCViB0aGVuIGZseUJWOkRlc3Ryb3koKSBmbHlCViA9IG5pbCBlbmQKICAgIGlmIGZseUd5cm8gdGhlbiBmbHlHeXJvOkRlc3Ryb3koKSBmbHlHeXJvID0gbmlsIGVuZAogICAgVXBCdXR0b24uVmlzaWJsZSA9IGZhbHNlCiAgICBEb3duQnV0dG9uLlZpc2libGUgPSBmYWxzZQogICAgSW5mb0xhYmVsLlZpc2libGUgPSBmYWxzZQplbmQKCi0tIFRvZ2dsZQpTZXR0aW5nc1RhYjpDcmVhdGVUb2dnbGUoewogICAgTmFtZSA9ICJGbHkgKFN0YWJsZSkiLAogICAgQ3VycmVudFZhbHVlID0gZmFsc2UsCiAgICBGbGFnID0gIkZseVRvZ2dsZVN0YWJsZSIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKFZhbHVlKQogICAgICAgIGlmIFZhbHVlIHRoZW4KICAgICAgICAgICAgc3RhcnRGbHkoKQogICAgICAgIGVsc2UKICAgICAgICAgICAgc3RvcEZseSgpCiAgICAgICAgZW5kCiAgICBlbmQsCn0pCgotLSBTcGVlZCBTbGlkZXIKU2V0dGluZ3NUYWI6Q3JlYXRlU2xpZGVyKHsKICAgIE5hbWUgPSAiRmx5IFNwZWVkIiwKICAgIFJhbmdlID0gezEwLCAyMDB9LAogICAgSW5jcmVtZW50ID0gNSwKICAgIFN1ZmZpeCA9ICJTcGVlZCIsCiAgICBDdXJyZW50VmFsdWUgPSBmbHlTcGVlZCwKICAgIEZsYWcgPSAiRmx5U3BlZWRTbGlkZXJTdGFibGUiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbihWYWx1ZSkKICAgICAgICBmbHlTcGVlZCA9IFZhbHVlCiAgICBlbmQsCn0pCgoKLS0gPT09PT09PT09PT09PT09PT09PT09PT09Ci0tIFNlbnNvciBOYW1hIFNheWEgKEFudGkgS2VkaXApCi0tID09PT09PT09PT09PT09PT09PT09PT09PQpsb2NhbCBQbGF5ZXJzID0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikKbG9jYWwgUnVuU2VydmljZSA9IGdhbWU6R2V0U2VydmljZSgiUnVuU2VydmljZSIpCmxvY2FsIGxwID0gUGxheWVycy5Mb2NhbFBsYXllcgpsb2NhbCByYW5kb21BY3RpdmUgPSBmYWxzZQpsb2NhbCBuYW1lTG9vcCA9IG5pbAoKbG9jYWwgZmFrZU5hbWVzID0gewogICAgIk9yYW5nTWlzdGVyaXVzIiwiUGxheWVyWCIsIk5vb2JCZXJnYXlhIiwiU2lUZW1idXMiLCJIYW50dUd1bnVuZyIKfQoKbG9jYWwgZnVuY3Rpb24gZ2V0UmFuZG9tTmFtZSgpCiAgICByZXR1cm4gZmFrZU5hbWVzW21hdGgucmFuZG9tKDEsICNmYWtlTmFtZXMpXQplbmQKCmxvY2FsIGZ1bmN0aW9uIGFwcGx5Tm9OYW1lKGNoYXIpCiAgICBsb2NhbCBodW1hbm9pZCA9IGNoYXI6V2FpdEZvckNoaWxkKCJIdW1hbm9pZCIsIDUpCiAgICBsb2NhbCBoZWFkID0gY2hhcjpXYWl0Rm9yQ2hpbGQoIkhlYWQiLCA1KQogICAgaWYgbm90IGh1bWFub2lkIG9yIG5vdCBoZWFkIHRoZW4gcmV0dXJuIGVuZAoKICAgIC0tIHNlbWJ1bnlpa2FuIGxhYmVsIGRlZmF1bHQKICAgIGh1bWFub2lkLk5hbWVEaXNwbGF5RGlzdGFuY2UgPSAwCiAgICBodW1hbm9pZC5EaXNwbGF5RGlzdGFuY2VUeXBlID0gRW51bS5IdW1hbm9pZERpc3BsYXlEaXN0YW5jZVR5cGUuTm9uZQogICAgaHVtYW5vaWQuRGlzcGxheU5hbWUgPSAiIgoKICAgIC0tIGhhcHVzIHNlbXVhIEJpbGxib2FyZCBiYXdhYW4KICAgIGZvciBfLCBndWkgaW4gaXBhaXJzKGhlYWQ6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICBpZiBndWk6SXNBKCJCaWxsYm9hcmRHdWkiKSBhbmQgZ3VpLk5hbWUgfj0gIkZha2VOYW1lIiB0aGVuCiAgICAgICAgICAgIGd1aTpEZXN0cm95KCkKICAgICAgICBlbmQKICAgIGVuZAoKICAgIC0tIGJpa2luIGZha2UgbmFtZSBzZW5kaXJpIGthbGF1IGJlbHVtIGFkYQogICAgaWYgbm90IGhlYWQ6RmluZEZpcnN0Q2hpbGQoIkZha2VOYW1lIikgdGhlbgogICAgICAgIGxvY2FsIGJpbGxib2FyZCA9IEluc3RhbmNlLm5ldygiQmlsbGJvYXJkR3VpIikKICAgICAgICBiaWxsYm9hcmQuTmFtZSA9ICJGYWtlTmFtZSIKICAgICAgICBiaWxsYm9hcmQuQWRvcm5lZSA9IGhlYWQKICAgICAgICBiaWxsYm9hcmQuU2l6ZSA9IFVEaW0yLm5ldygwLCAyMDAsIDAsIDUwKQogICAgICAgIGJpbGxib2FyZC5TdHVkc09mZnNldCA9IFZlY3RvcjMubmV3KDAsIDIuNSwgMCkKICAgICAgICBiaWxsYm9hcmQuQWx3YXlzT25Ub3AgPSB0cnVlCiAgICAgICAgYmlsbGJvYXJkLlBhcmVudCA9IGhlYWQKCiAgICAgICAgbG9jYWwgdGV4dCA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIikKICAgICAgICB0ZXh0LlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMSwgMCkKICAgICAgICB0ZXh0LkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgICAgICAgdGV4dC5UZXh0Q29sb3IzID0gQ29sb3IzLm5ldygxLDEsMSkKICAgICAgICB0ZXh0LlRleHRTdHJva2VUcmFuc3BhcmVuY3kgPSAwCiAgICAgICAgdGV4dC5Gb250ID0gRW51bS5Gb250LlNvdXJjZVNhbnNCb2xkCiAgICAgICAgdGV4dC5UZXh0U2NhbGVkID0gdHJ1ZQogICAgICAgIHRleHQuVGV4dCA9IGdldFJhbmRvbU5hbWUoKQogICAgICAgIHRleHQuUGFyZW50ID0gYmlsbGJvYXJkCiAgICBlbmQKCiAgICAtLSBsb29wIGFudGkta2VkaXAgKGhhcHVzIG5hbWUgdGFnIGFzbGkgc2V0aWFwIGZyYW1lKQogICAgaWYgbmFtZUxvb3AgdGhlbiBuYW1lTG9vcDpEaXNjb25uZWN0KCkgZW5kCiAgICBuYW1lTG9vcCA9IFJ1blNlcnZpY2UuUmVuZGVyU3RlcHBlZDpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICBpZiBub3QgcmFuZG9tQWN0aXZlIHRoZW4gcmV0dXJuIGVuZAogICAgICAgIGlmIGhlYWQgdGhlbgogICAgICAgICAgICBmb3IgXywgZ3VpIGluIGlwYWlycyhoZWFkOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICBpZiBndWk6SXNBKCJCaWxsYm9hcmRHdWkiKSBhbmQgZ3VpLk5hbWUgfj0gIkZha2VOYW1lIiB0aGVuCiAgICAgICAgICAgICAgICAgICAgZ3VpOkRlc3Ryb3koKQogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kKQplbmQKCmxvY2FsIGZ1bmN0aW9uIHJlc2V0TmFtZShjaGFyKQogICAgaWYgbmFtZUxvb3AgdGhlbgogICAgICAgIG5hbWVMb29wOkRpc2Nvbm5lY3QoKQogICAgICAgIG5hbWVMb29wID0gbmlsCiAgICBlbmQKICAgIGxvY2FsIGhlYWQgPSBjaGFyOkZpbmRGaXJzdENoaWxkKCJIZWFkIikKICAgIGlmIGhlYWQgYW5kIGhlYWQ6RmluZEZpcnN0Q2hpbGQoIkZha2VOYW1lIikgdGhlbgogICAgICAgIGhlYWQuRmFrZU5hbWU6RGVzdHJveSgpCiAgICBlbmQKICAgIGxvY2FsIGh1bWFub2lkID0gY2hhcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKQogICAgaWYgaHVtYW5vaWQgdGhlbgogICAgICAgIGh1bWFub2lkLkRpc3BsYXlEaXN0YW5jZVR5cGUgPSBFbnVtLkh1bWFub2lkRGlzcGxheURpc3RhbmNlVHlwZS5WaWV3ZXIKICAgICAgICBodW1hbm9pZC5OYW1lRGlzcGxheURpc3RhbmNlID0gMTAwCiAgICAgICAgaHVtYW5vaWQuRGlzcGxheU5hbWUgPSBscC5OYW1lCiAgICBlbmQKZW5kCgpTZXR0aW5nc1RhYjpDcmVhdGVUb2dnbGUoewogICBOYW1lID0gIlNlbnNvciBOYW1hIiwKICAgQ3VycmVudFZhbHVlID0gZmFsc2UsCiAgIEZsYWcgPSAiTXlGYWtlTmFtZVRvZ2dsZSIsCiAgIENhbGxiYWNrID0gZnVuY3Rpb24oVmFsdWUpCiAgICAgICAgcmFuZG9tQWN0aXZlID0gVmFsdWUKICAgICAgICBpZiByYW5kb21BY3RpdmUgdGhlbgogICAgICAgICAgICBpZiBscC5DaGFyYWN0ZXIgdGhlbiBhcHBseU5vTmFtZShscC5DaGFyYWN0ZXIpIGVuZAogICAgICAgICAgICBscC5DaGFyYWN0ZXJBZGRlZDpDb25uZWN0KGZ1bmN0aW9uKGNoYXIpCiAgICAgICAgICAgICAgICB0YXNrLndhaXQoMSkKICAgICAgICAgICAgICAgIGlmIHJhbmRvbUFjdGl2ZSB0aGVuCiAgICAgICAgICAgICAgICAgICAgYXBwbHlOb05hbWUoY2hhcikKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpCiAgICAgICAgZWxzZQogICAgICAgICAgICBpZiBscC5DaGFyYWN0ZXIgdGhlbiByZXNldE5hbWUobHAuQ2hhcmFjdGVyKSBlbmQKICAgICAgICBlbmQKICAgZW5kCn0pCgoKCi0tID09PT09PT09PT09PT09PT09PT09PT09PQotLSBGdW5UYWI6IEZvbGxvdyArIExlbmdhbiBKb2dldCArIEtlcGFsYSBUZXJiYWxpawotLSA9PT09PT09PT09PT09PT09PT09PT09PT0KbG9jYWwgUGxheWVycyA9IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpCmxvY2FsIFJ1blNlcnZpY2UgPSBnYW1lOkdldFNlcnZpY2UoIlJ1blNlcnZpY2UiKQpsb2NhbCBMb2NhbFBsYXllciA9IFBsYXllcnMuTG9jYWxQbGF5ZXIKCmxvY2FsIEZ1blRhYiA9IFdpbmRvdzpDcmVhdGVUYWIoIkZ1biIsIDQ0ODMzNjI0NTgpCkZ1blRhYjpDcmVhdGVTZWN0aW9uKCJUcm9sbGluZyIpCmxvY2FsIFRhcmdldFBsYXllciA9IG5pbApsb2NhbCBGb2xsb3dDb25uZWN0aW9uCmxvY2FsIEpvZ2V0Q29ubmVjdGlvbgoKbG9jYWwgSm9nZXRBbXBsaXR1ZGUgPSAzMCAtLSBkZXJhamF0CmxvY2FsIEpvZ2V0U3BlZWQgPSA1IC0tIGtlY2VwYXRhbgoKLS0gRHJvcGRvd24gcGlsaWggcGxheWVyCmxvY2FsIGZ1bmN0aW9uIFJlZnJlc2hQbGF5ZXJMaXN0KCkKICAgIGxvY2FsIG5hbWVzID0ge30KICAgIGZvciBfLCBwbHIgaW4gaXBhaXJzKFBsYXllcnM6R2V0UGxheWVycygpKSBkbwogICAgICAgIGlmIHBsciB+PSBMb2NhbFBsYXllciB0aGVuCiAgICAgICAgICAgIHRhYmxlLmluc2VydChuYW1lcywgcGxyLkRpc3BsYXlOYW1lKQogICAgICAgIGVuZAogICAgZW5kCiAgICByZXR1cm4gbmFtZXMKZW5kCgpsb2NhbCBQbGF5ZXJEcm9wZG93biA9IEZ1blRhYjpDcmVhdGVEcm9wZG93bih7CiAgICBOYW1lID0gIvCfkoPwn4+7IFBpbGloIFBsYXllciIsCiAgICBPcHRpb25zID0gUmVmcmVzaFBsYXllckxpc3QoKSwKICAgIEN1cnJlbnRPcHRpb24gPSB7fSwKICAgIEZsYWcgPSAiRnVuUGxheWVyRHJvcGRvd24iLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbihvcHRpb24pCiAgICAgICAgZm9yIF8sIHBsciBpbiBpcGFpcnMoUGxheWVyczpHZXRQbGF5ZXJzKCkpIGRvCiAgICAgICAgICAgIGlmIHBsci5EaXNwbGF5TmFtZSA9PSBvcHRpb25bMV0gdGhlbgogICAgICAgICAgICAgICAgVGFyZ2V0UGxheWVyID0gcGxyCiAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAp9KQoKRnVuVGFiOkNyZWF0ZUJ1dHRvbih7CiAgICBOYW1lID0gIvCfkoPwn4+7IFJlZnJlc2ggUGxheWVyIExpc3QiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgUGxheWVyRHJvcGRvd246UmVmcmVzaChSZWZyZXNoUGxheWVyTGlzdCgpLCB0cnVlKQogICAgZW5kCn0pCgotLSBUb2dnbGUgRm9sbG93IFBsYXllcgpsb2NhbCBGb2xsb3dFbmFibGVkID0gZmFsc2UKRnVuVGFiOkNyZWF0ZVRvZ2dsZSh7CiAgICBOYW1lID0gIvCfj4MgSWt1dGkgUGxheWVyIiwKICAgIEN1cnJlbnRWYWx1ZSA9IGZhbHNlLAogICAgRmxhZyA9ICJGb2xsb3dUb2dnbGUiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbih2YWx1ZSkKICAgICAgICBGb2xsb3dFbmFibGVkID0gdmFsdWUKICAgICAgICBpZiBGb2xsb3dFbmFibGVkIHRoZW4KICAgICAgICAgICAgRm9sbG93Q29ubmVjdGlvbiA9IFJ1blNlcnZpY2UuSGVhcnRiZWF0OkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgaWYgVGFyZ2V0UGxheWVyIGFuZCBUYXJnZXRQbGF5ZXIuQ2hhcmFjdGVyIGFuZCBUYXJnZXRQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgdGhlbgogICAgICAgICAgICAgICAgICAgIGxvY2FsIGNoYXIgPSBMb2NhbFBsYXllci5DaGFyYWN0ZXIKICAgICAgICAgICAgICAgICAgICBpZiBjaGFyIGFuZCBjaGFyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBjaGFyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gQ0ZyYW1lLm5ldyhUYXJnZXRQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gKyBWZWN0b3IzLm5ldygwLDAuNSwwKSkKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpCiAgICAgICAgZWxzZQogICAgICAgICAgICBpZiBGb2xsb3dDb25uZWN0aW9uIHRoZW4KICAgICAgICAgICAgICAgIEZvbGxvd0Nvbm5lY3Rpb246RGlzY29ubmVjdCgpCiAgICAgICAgICAgICAgICBGb2xsb3dDb25uZWN0aW9uID0gbmlsCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCn0pCkZ1blRhYjpDcmVhdGVTZWN0aW9uKCJFbW90ZSIpCmxvY2FsIEpvZ2V0RW5hYmxlZCA9IGZhbHNlCkZ1blRhYjpDcmVhdGVUb2dnbGUoewogICAgTmFtZSA9ICLwn5e/IEVyb3IgKEJpa2luIFRlcmJhbmcpIiwKICAgIEN1cnJlbnRWYWx1ZSA9IGZhbHNlLAogICAgRmxhZyA9ICJKb2dldFRvZ2dsZSIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKHZhbHVlKQogICAgICAgIEpvZ2V0RW5hYmxlZCA9IHZhbHVlCiAgICAgICAgaWYgSm9nZXRFbmFibGVkIHRoZW4KICAgICAgICAgICAgbG9jYWwgdCA9IDAKICAgICAgICAgICAgSm9nZXRDb25uZWN0aW9uID0gUnVuU2VydmljZS5IZWFydGJlYXQ6Q29ubmVjdChmdW5jdGlvbihkdCkKICAgICAgICAgICAgICAgIHQgKz0gZHQgKiBKb2dldFNwZWVkCiAgICAgICAgICAgICAgICBsb2NhbCBjaGFyID0gTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyCiAgICAgICAgICAgICAgICBpZiBjaGFyIHRoZW4KICAgICAgICAgICAgICAgICAgICBsb2NhbCBsZWZ0QXJtID0gY2hhcjpGaW5kRmlyc3RDaGlsZCgiTGVmdFVwcGVyQXJtIikgb3IgY2hhcjpGaW5kRmlyc3RDaGlsZCgiTGVmdCBBcm0iKQogICAgICAgICAgICAgICAgICAgIGxvY2FsIHJpZ2h0QXJtID0gY2hhcjpGaW5kRmlyc3RDaGlsZCgiUmlnaHRVcHBlckFybSIpIG9yIGNoYXI6RmluZEZpcnN0Q2hpbGQoIlJpZ2h0IEFybSIpCiAgICAgICAgICAgICAgICAgICAgaWYgbGVmdEFybSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGxlZnRBcm0uQ0ZyYW1lID0gbGVmdEFybS5DRnJhbWUgKiBDRnJhbWUuQW5nbGVzKDEsIDAsIG1hdGgucmFkKG1hdGguc2luKHQpICogSm9nZXRBbXBsaXR1ZGUpKQogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGlmIHJpZ2h0QXJtIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgcmlnaHRBcm0uQ0ZyYW1lID0gcmlnaHRBcm0uQ0ZyYW1lICogQ0ZyYW1lLkFuZ2xlcygxLCAwLCBtYXRoLnJhZCgtbWF0aC5zaW4odCkgKiBKb2dldEFtcGxpdHVkZSkpCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKQogICAgICAgIGVsc2UKICAgICAgICAgICAgaWYgSm9nZXRDb25uZWN0aW9uIHRoZW4KICAgICAgICAgICAgICAgIEpvZ2V0Q29ubmVjdGlvbjpEaXNjb25uZWN0KCkKICAgICAgICAgICAgICAgIEpvZ2V0Q29ubmVjdGlvbiA9IG5pbAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAp9KQoKLS0gVG9nZ2xlIEtlcGFsYSBkaSBiYXdhaCAvIHRlcmJhbGlrIHBlcm1hbmVuCmxvY2FsIEludmVydEVuYWJsZWQgPSBmYWxzZQpsb2NhbCBJbnZlcnRDb25uZWN0aW9uCgpGdW5UYWI6Q3JlYXRlVG9nZ2xlKHsKICAgIE5hbWUgPSAi8J+XvyBLZXBhbGEgS2ViYXdhaCIsCiAgICBDdXJyZW50VmFsdWUgPSBmYWxzZSwKICAgIEZsYWcgPSAiSW52ZXJ0VG9nZ2xlIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24odmFsdWUpCiAgICAgICAgSW52ZXJ0RW5hYmxlZCA9IHZhbHVlCgogICAgICAgIGlmIEludmVydEVuYWJsZWQgdGhlbgogICAgICAgICAgICBpZiBJbnZlcnRDb25uZWN0aW9uIHRoZW4gSW52ZXJ0Q29ubmVjdGlvbjpEaXNjb25uZWN0KCkgZW5kCiAgICAgICAgICAgIEludmVydENvbm5lY3Rpb24gPSBSdW5TZXJ2aWNlLkhlYXJ0YmVhdDpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGxvY2FsIGNoYXIgPSBMb2NhbFBsYXllci5DaGFyYWN0ZXIKICAgICAgICAgICAgICAgIGlmIGNoYXIgYW5kIGNoYXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgcm9vdCA9IGNoYXIuSHVtYW5vaWRSb290UGFydAogICAgICAgICAgICAgICAgICAgIC0tIE1lbWFzdGlrYW4gc2VsYWx1IHRlcmJhbGlrCiAgICAgICAgICAgICAgICAgICAgcm9vdC5DRnJhbWUgPSBDRnJhbWUubmV3KHJvb3QuUG9zaXRpb24pICogQ0ZyYW1lLkFuZ2xlcyhtYXRoLnJhZCgxODApLDEwLDApCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKQogICAgICAgIGVsc2UKICAgICAgICAgICAgaWYgSW52ZXJ0Q29ubmVjdGlvbiB0aGVuCiAgICAgICAgICAgICAgICBJbnZlcnRDb25uZWN0aW9uOkRpc2Nvbm5lY3QoKQogICAgICAgICAgICAgICAgSW52ZXJ0Q29ubmVjdGlvbiA9IG5pbAogICAgICAgICAgICBlbmQKICAgICAgICAgICAgLS0gS2VtYmFsaWthbiBub3JtYWwKICAgICAgICAgICAgbG9jYWwgY2hhciA9IExvY2FsUGxheWVyLkNoYXJhY3RlcgogICAgICAgICAgICBpZiBjaGFyIGFuZCBjaGFyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgdGhlbgogICAgICAgICAgICAgICAgbG9jYWwgcm9vdCA9IGNoYXIuSHVtYW5vaWRSb290UGFydAogICAgICAgICAgICAgICAgcm9vdC5DRnJhbWUgPSBDRnJhbWUubmV3KHJvb3QuUG9zaXRpb24pICogQ0ZyYW1lLkFuZ2xlcygwLDAsMCkKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKfSkKCgpsb2NhbCBQbGF5ZXJzID0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikKbG9jYWwgbHAgPSBQbGF5ZXJzLkxvY2FsUGxheWVyCmxvY2FsIHNpdEFjdGl2ZSA9IGZhbHNlCmxvY2FsIGNvbnN0cmFpbnQgPSB7fQoKLS0gY2FyaSBwbGF5ZXIgdGVyZGVrYXQKbG9jYWwgZnVuY3Rpb24gZ2V0TmVhcmVzdFBsYXllcigpCiAgICBsb2NhbCBuZWFyZXN0LCBkaXN0ID0gbmlsLCBtYXRoLmh1Z2UKICAgIGZvciBfLCBwbHIgaW4gcGFpcnMoUGxheWVyczpHZXRQbGF5ZXJzKCkpIGRvCiAgICAgICAgaWYgcGxyIH49IGxwIGFuZCBwbHIuQ2hhcmFjdGVyIGFuZCBwbHIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgdGhlbgogICAgICAgICAgICBsb2NhbCBkID0gKGxwLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gcGxyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUKICAgICAgICAgICAgaWYgZCA8IGRpc3QgdGhlbgogICAgICAgICAgICAgICAgZGlzdCA9IGQKICAgICAgICAgICAgICAgIG5lYXJlc3QgPSBwbHIKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKICAgIHJldHVybiBuZWFyZXN0CmVuZAoKLS0gZHVkdWsgZGkgYXRhcyBwbGF5ZXIKbG9jYWwgZnVuY3Rpb24gc2l0T25QbGF5ZXIodGFyZ2V0KQogICAgaWYgbm90IHRhcmdldCBvciBub3QgdGFyZ2V0LkNoYXJhY3RlciB0aGVuIHJldHVybiBlbmQKICAgIGxvY2FsIG15SFJQID0gbHAuQ2hhcmFjdGVyOldhaXRGb3JDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpCiAgICBsb2NhbCB0YXJnZXRIUlAgPSB0YXJnZXQuQ2hhcmFjdGVyOldhaXRGb3JDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpCgogICAgLS0gYmVyc2loa2FuIGNvbnN0cmFpbnQgbGFtYQogICAgZm9yIF8sIHYgaW4gcGFpcnMobXlIUlA6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICBpZiB2OklzQSgiQWxpZ25Qb3NpdGlvbiIpIG9yIHY6SXNBKCJBbGlnbk9yaWVudGF0aW9uIikgb3IgdjpJc0EoIkF0dGFjaG1lbnQiKSB0aGVuCiAgICAgICAgICAgIHY6RGVzdHJveSgpCiAgICAgICAgZW5kCiAgICBlbmQKCiAgICAtLSBiaWtpbiBhdHRhY2htZW50CiAgICBsb2NhbCBhMCA9IEluc3RhbmNlLm5ldygiQXR0YWNobWVudCIsIG15SFJQKQogICAgbG9jYWwgYTEgPSBJbnN0YW5jZS5uZXcoIkF0dGFjaG1lbnQiLCB0YXJnZXRIUlApCiAgICBhMC5Qb3NpdGlvbiA9IFZlY3RvcjMubmV3KDAsIDIsIDApIC0tIGR1ZHVrIGRpIGF0YXMga2VwYWxhCgogICAgbG9jYWwgYXAgPSBJbnN0YW5jZS5uZXcoIkFsaWduUG9zaXRpb24iLCBteUhSUCkKICAgIGFwLk1heEZvcmNlID0gOTk5OTk5CiAgICBhcC5SZXNwb25zaXZlbmVzcyA9IDIwMAogICAgYXAuQXR0YWNobWVudDAgPSBhMAogICAgYXAuQXR0YWNobWVudDEgPSBhMQoKICAgIGxvY2FsIGFvID0gSW5zdGFuY2UubmV3KCJBbGlnbk9yaWVudGF0aW9uIiwgbXlIUlApCiAgICBhby5NYXhUb3JxdWUgPSA5OTk5OTkKICAgIGFvLlJlc3BvbnNpdmVuZXNzID0gMjAwCiAgICBhby5BdHRhY2htZW50MCA9IGEwCiAgICBhby5BdHRhY2htZW50MSA9IGExCgogICAgY29uc3RyYWludCA9IHthcCwgYW8sIGEwLCBhMX0KZW5kCgotLSBsZXBhcyBkdWR1awpsb2NhbCBmdW5jdGlvbiB1blNpdCgpCiAgICBpZiBscC5DaGFyYWN0ZXIgYW5kIGxwLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIHRoZW4KICAgICAgICBmb3IgXywgdiBpbiBwYWlycyhscC5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydDpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICBpZiB2OklzQSgiQWxpZ25Qb3NpdGlvbiIpIG9yIHY6SXNBKCJBbGlnbk9yaWVudGF0aW9uIikgb3IgdjpJc0EoIkF0dGFjaG1lbnQiKSB0aGVuCiAgICAgICAgICAgICAgICB2OkRlc3Ryb3koKQogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAogICAgY29uc3RyYWludCA9IHt9CmVuZAoKRnVuVGFiOkNyZWF0ZVRvZ2dsZSh7CiAgICBOYW1lID0gIvCflbpNdXRhci1NdXRhcikiLAogICAgQ3VycmVudFZhbHVlID0gZmFsc2UsCiAgICBGbGFnID0gIlNwaW5Cb2R5RmFzdCIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKFZhbHVlKQogICAgICAgIHNwaW5BY3RpdmUgPSBWYWx1ZQogICAgICAgIGlmIHNwaW5BY3RpdmUgdGhlbgogICAgICAgICAgICBSYXlmaWVsZDpOb3RpZnkoewogICAgICAgICAgICAgICAgVGl0bGUgPSAiQWt0aWYiLAogICAgICAgICAgICAgICAgQ29udGVudCA9ICJLYXJha3RlciBtdXRlciBrYXlhayBLYW11ISIsCiAgICAgICAgICAgICAgICBEdXJhdGlvbiA9IDMKICAgICAgICAgICAgfSkKCiAgICAgICAgICAgIHRhc2suc3Bhd24oZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgbG9jYWwgYW5nbGUgPSAwCiAgICAgICAgICAgICAgICB3aGlsZSBzcGluQWN0aXZlIGRvCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgaHJwID0gTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyIGFuZCBMb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKQogICAgICAgICAgICAgICAgICAgIGlmIGhycCB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGFuZ2xlID0gYW5nbGUgKyA1MCAtLSBrZWNlcGF0YW4gbXV0ZXIKICAgICAgICAgICAgICAgICAgICAgICAgaHJwLkNGcmFtZSA9IENGcmFtZS5uZXcoaHJwLlBvc2l0aW9uKSAqIENGcmFtZS5BbmdsZXMoMCwgbWF0aC5yYWQoYW5nbGUpLCAwKQogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdCgwLjAxKSAtLSBzZW1ha2luIGtlY2lsIGRlbGF5LCBzZW1ha2luIGNlcGF0CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKQogICAgICAgIGVsc2UKICAgICAgICAgICAgUmF5ZmllbGQ6Tm90aWZ5KHsKICAgICAgICAgICAgICAgIFRpdGxlID0gIk5vbmFrdGlmIiwKICAgICAgICAgICAgICAgIENvbnRlbnQgPSAiQmVycHV0YXIgYmVyaGVudGkuIiwKICAgICAgICAgICAgICAgIER1cmF0aW9uID0gMwogICAgICAgICAgICB9KQogICAgICAgIGVuZAogICAgZW5kLAp9KQoKCmVsc2UKICAgIC0tIEthbGF1IEhXSUQgYmVsdW0gdGVyZGFmdGFyCiAgICBsb2NhbCBJbmZvVGFiID0gV2luZG93OkNyZWF0ZVRhYigiSW5mbyIsIDQ0ODMzNjI0NTgpCgogICAgSW5mb1RhYjpDcmVhdGVQYXJhZ3JhcGgoewogICAgICAgIFRpdGxlID0gIuKaoO+4jyBIV0lEIFRpZGFrIFRlcmRhZnRhciIsCiAgICAgICAgQ29udGVudCA9ICJIdWJ1bmdpIG93bmVyIHVudHVrIG1lbmRhZnRhcmthbiBIV0lEIGthbXUuIgogICAgfSkKCiAgICBJbmZvVGFiOkNyZWF0ZUJ1dHRvbih7CiAgICAgICAgTmFtZSA9ICJTYWxpbiBIV0lEIiwKICAgICAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICAgICAgc2V0Y2xpcGJvYXJkKGh3aWQpIC0tIGNvcHkga2UgY2xpcGJvYXJkCiAgICAgICAgICAgIFJheWZpZWxkOk5vdGlmeSh7CiAgICAgICAgICAgICAgICBUaXRsZSA9ICJEaXNhbGluIiwKICAgICAgICAgICAgICAgIENvbnRlbnQgPSAiSFdJRCBrYW11IHN1ZGFoIGRpc2FsaW4ga2UgY2xpcGJvYXJkLiIsCiAgICAgICAgICAgICAgICBEdXJhdGlvbiA9IDUKICAgICAgICAgICAgfSkKICAgICAgICBlbmQsCiAgICB9KQplbmQK
]]

-- decode + jalankan
local decoded = base64Decode(code)
loadstring(decoded)()
